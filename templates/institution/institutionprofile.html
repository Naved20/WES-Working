{% extends "base2.html" %}

{% block title %}Institution Profile{% endblock %}
{% block user %}Institution{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8 max-w-7xl">
    <!-- Profile Header -->
    <div class="bg-white rounded-2xl shadow-lg p-6 mb-8 border border-gray-200">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center">
            <div class="flex items-start space-x-4 mb-4 md:mb-0">
                <div class="flex-shrink-0 relative">
                    {% if institution_details and institution_details.profile_picture %}
                        <img src="{{ url_for('static', filename='uploads/' + institution_details.profile_picture) }}" 
                             alt="{{ institution_details.name }}" 
                             class="w-24 h-24 rounded-2xl object-cover border-4 border-blue-100 shadow-md">
                    {% else %}
                        <div class="w-24 h-24 rounded-2xl bg-blue-50 flex items-center justify-center border-4 border-blue-100 shadow-md">
                            <i class="fas fa-university text-blue-500 text-3xl"></i>
                        </div>
                    {% endif %}
                    <div class="absolute -bottom-2 -right-2 w-6 h-6 rounded-full bg-green-400 border-2 border-white"></div>
                </div>
                <div class="flex-1">
                    <h1 class="text-3xl font-bold text-gray-900 mb-1">{{ institution_details.name if institution_details else institution }}</h1>
                    <div class="flex flex-wrap items-center space-x-4 mb-2">
                        <span class="flex items-center text-gray-600 text-sm bg-gray-100 px-3 py-1 rounded-full">
                            <i class="fas fa-user-shield mr-2"></i>
                            Institution Administrator
                        </span>
                        <span class="flex items-center text-sm bg-gray-100 px-3 py-1 rounded-full">
                            <span class="w-2 h-2 rounded-full bg-green-500 mr-2"></span>
                            {{ institution_details.status|title if institution_details else 'Active' }}
                        </span>
                    </div>
                    <div class="flex items-center text-gray-600">
                        <i class="fas fa-envelope mr-2"></i>
                        <span class="text-sm">{{ email }}</span>
                    </div>
                </div>
            </div>
            <div class="flex-shrink-0 flex gap-3">
                <a href="{{ url_for('editinstitutionprofile') }}" class="inline-flex items-center px-5 py-2.5 bg-blue-500 border border-blue-600 rounded-xl shadow-sm text-white font-medium hover:bg-blue-600 transition-all duration-300">
                    <i class="fas fa-edit mr-3"></i>
                    Edit Profile
                </a>

            </div>
        </div>
    </div>

    <!-- Quick Stats -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <div class="bg-white rounded-2xl shadow-md p-6 border border-gray-200">
            <div class="flex items-center">
                <div class="flex-shrink-0 p-4 rounded-2xl bg-blue-100 text-blue-600">
                    <i class="fas fa-user-graduate text-2xl"></i>
                </div>
                <div class="ml-4 flex-1">
                    <div class="text-3xl font-bold text-gray-900">{{ total_students }}</div>
                    <div class="text-sm text-gray-500 font-medium">Total Students</div>
                    <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                        <div class="bg-blue-500 h-2 rounded-full" style="width: 85%"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="bg-white rounded-2xl shadow-md p-6 border border-gray-200">
            <div class="flex items-center">
                <div class="flex-shrink-0 p-4 rounded-2xl bg-blue-100 text-blue-600">
                    <i class="fas fa-chalkboard-teacher text-2xl"></i>
                </div>
                <div class="ml-4 flex-1">
                    <div class="text-3xl font-bold text-gray-900">{{ total_mentors }}</div>
                    <div class="text-sm text-gray-500 font-medium">Total Mentors</div>
                    <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                        <div class="bg-blue-500 h-2 rounded-full" style="width: 70%"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="bg-white rounded-2xl shadow-md p-6 border border-gray-200">
            <div class="flex items-center">
                <div class="flex-shrink-0 p-4 rounded-2xl bg-blue-100 text-blue-600">
                    <i class="fas fa-handshake text-2xl"></i>
                </div>
                <div class="ml-4 flex-1">
                    <div class="text-3xl font-bold text-gray-900">{{ active_mentorships }}</div>
                    <div class="text-sm text-gray-500 font-medium">Active Mentorships</div>
                    <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                        <div class="bg-blue-500 h-2 rounded-full" style="width: 60%"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="bg-white rounded-2xl shadow-md p-6 border border-gray-200">
            <div class="flex items-center">
                <div class="flex-shrink-0 p-4 rounded-2xl bg-blue-100 text-blue-600">
                    <i class="fas fa-calendar-check text-2xl"></i>
                </div>
                <div class="ml-4 flex-1">
                    <div class="text-3xl font-bold text-gray-900">{{ completed_mentorships }}</div>
                    <div class="text-sm text-gray-500 font-medium">Completed</div>
                    <div class="w-full bg-gray-200 rounded-full h-2 mt-2">
                        <div class="bg-blue-500 h-2 rounded-full" style="width: 45%"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- Personal Information -->
        <div class="bg-white rounded-2xl shadow-md overflow-hidden border border-gray-200">
            <div class="px-6 py-5 bg-gray-50 border-b border-gray-200">
                <h2 class="text-xl font-semibold text-gray-900 flex items-center">
                    <div class="p-2 bg-blue-100 rounded-xl mr-3">
                        <i class="fas fa-user-circle text-blue-600 text-lg"></i>
                    </div>
                    Administrator Information
                </h2>
            </div>
            <div class="p-6">
                <div class="space-y-5">
                    <div class="flex items-center p-4 rounded-xl bg-blue-50 border border-blue-100">
                        <div class="p-3 bg-blue-100 rounded-lg mr-4">
                            <i class="fas fa-user text-blue-600"></i>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-500">Full Name</label>
                            <span class="mt-1 block text-lg font-semibold text-gray-900">{{ full_name }}</span>
                        </div>
                    </div>
                    
                    <div class="flex items-center p-4 rounded-xl bg-blue-50 border border-blue-100">
                        <div class="p-3 bg-blue-100 rounded-lg mr-4">
                            <i class="fas fa-envelope text-blue-600"></i>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-500">Email</label>
                            <span class="mt-1 block text-lg font-semibold text-gray-900">{{ email }}</span>
                        </div>
                    </div>
                    
                    <div class="flex items-center p-4 rounded-xl bg-blue-50 border border-blue-100">
                        <div class="p-3 bg-blue-100 rounded-lg mr-4">
                            <i class="fas fa-university text-blue-600"></i>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-500">Institution</label>
                            <span class="mt-1 block text-lg font-semibold text-gray-900">{{ institution }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Institution Details -->
        <div class="bg-white rounded-2xl shadow-md overflow-hidden border border-gray-200">
            <div class="px-6 py-5 bg-gray-50 border-b border-gray-200">
                <h2 class="text-xl font-semibold text-gray-900 flex items-center">
                    <div class="p-2 bg-blue-100 rounded-xl mr-3">
                        <i class="fas fa-university text-blue-600 text-lg"></i>
                    </div>
                    Institution Details
                </h2>
            </div>
            <div class="p-6">
                {% if institution_details %}
                <div class="space-y-5">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                        <div class="p-4 rounded-xl bg-blue-50 border border-blue-100">
                            <label class="block text-sm font-medium text-gray-500 mb-2">Institution Name</label>
                            <span class="block text-lg font-semibold text-gray-900">{{ institution_details.name }}</span>
                        </div>
                        
                        {% if institution_details.email_domain %}
                        <div class="p-4 rounded-xl bg-blue-50 border border-blue-100">
                            <label class="block text-sm font-medium text-gray-500 mb-2">Email Domain</label>
                            <span class="block text-lg font-semibold text-gray-900">{{ institution_details.email_domain }}</span>
                        </div>
                        {% endif %}
                    </div>
                    
                    {% if institution_details.contact_person or institution_details.contact_email %}
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                        {% if institution_details.contact_person %}
                        <div class="p-4 rounded-xl bg-blue-50 border border-blue-100">
                            <label class="block text-sm font-medium text-gray-500 mb-2">Contact Person</label>
                            <span class="block text-lg font-semibold text-gray-900">{{ institution_details.contact_person }}</span>
                        </div>
                        {% endif %}
                        
                        {% if institution_details.contact_email %}
                        <div class="p-4 rounded-xl bg-blue-50 border border-blue-100">
                            <label class="block text-sm font-medium text-gray-500 mb-2">Contact Email</label>
                            <span class="block text-lg font-semibold text-gray-900">{{ institution_details.contact_email }}</span>
                        </div>
                        {% endif %}
                    </div>
                    {% endif %}
                    
                    {% if institution_details.contact_phone or institution_details.website %}
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                        {% if institution_details.contact_phone %}
                        <div class="p-4 rounded-xl bg-blue-50 border border-blue-100">
                            <label class="block text-sm font-medium text-gray-500 mb-2">Contact Phone</label>
                            <span class="block text-lg font-semibold text-gray-900">{{ institution_details.contact_phone }}</span>
                        </div>
                        {% endif %}
                        
                        {% if institution_details.website %}
                        <div class="p-4 rounded-xl bg-blue-50 border border-blue-100">
                            <label class="block text-sm font-medium text-gray-500 mb-2">Website</label>
                            <a href="{{ institution_details.website }}" target="_blank" class="flex items-center text-lg font-semibold text-blue-600 hover:text-blue-800 transition-colors">
                                {{ institution_details.website }}
                                <i class="fas fa-external-link-alt ml-2 text-sm"></i>
                            </a>
                        </div>
                        {% endif %}
                    </div>
                    {% endif %}
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-5">
                        <div class="p-4 rounded-xl bg-blue-50 border border-blue-100">
                            <label class="block text-sm font-medium text-gray-500 mb-2">Status</label>
                            <span class="inline-flex items-center px-3 py-1.5 rounded-full text-sm font-semibold bg-green-100 text-green-800">
                                <span class="w-2 h-2 rounded-full bg-green-500 mr-2"></span>
                                {{ institution_details.status|title }}
                            </span>
                        </div>
                        
                        <div class="p-4 rounded-xl bg-blue-50 border border-blue-100">
                            <label class="block text-sm font-medium text-gray-500 mb-2">Member Since</label>
                            <span class="block text-lg font-semibold text-gray-900">{{ institution_details.created_at.strftime('%B %d, %Y') if institution_details.created_at else 'N/A' }}</span>
                        </div>
                        
                        <div class="p-4 rounded-xl bg-blue-50 border border-blue-100">
                            <label class="block text-sm font-medium text-gray-500 mb-2">Institution ID</label>
                            <span class="block text-lg font-semibold text-gray-900 font-mono">{{ institution_details.id }}</span>
                        </div>
                    </div>
                </div>
                {% else %}
                <div class="text-center py-12">
                    <div class="p-6 bg-gray-100 rounded-2xl inline-flex mb-4">
                        <i class="fas fa-info-circle text-gray-400 text-4xl"></i>
                    </div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-2">No institution details available</h3>
                    <p class="text-gray-500 max-w-sm mx-auto">Institution "{{ institution }}" not found in database. Please contact support for assistance.</p>
                </div>
                {% endif %}
            </div>
        </div>


    </div>
</div>
{% endblock %}