<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}{% endblock %} | Mentor Connect</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: 'hsl(221, 83%, 53%)',
            accent: 'hsl(213, 94%, 68%)',
          }
        }
      }
    }
  </script>

  <!-- Fonts: Poppins + Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap"
    rel="stylesheet">

  <!-- Custom Design System -->
  <link rel="stylesheet" href="{{ url_for('static', filename='design-system.css') }}">

  <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='img/logo.jpg') }}">
  <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
  <meta name="theme-color" content="#2563eb">

  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: hsl(220, 30%, 98%);
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      font-family: 'Poppins', sans-serif;
    }
  </style>
</head>

<body class="min-h-screen text-slate-800">

  <!-- Header (Fixed) -->
  <header class="fixed top-0 left-0 right-0 z-50 glass-nav">
    <div class="container mx-auto px-4 md:px-8">
      <div class="flex justify-between items-center h-20">
        <!-- Logo -->
        <a href="{{ url_for('home')}}" class="flex items-center gap-3 hover:opacity-80 transition-all hover:scale-105">
          <img src="{{ url_for('static', filename='img/logo.jpg') }}" alt="Logo"
            class="h-10 w-10 rounded-xl shadow-lg ring-2 ring-white/50">
          <span class="text-xl md:text-2xl font-bold text-gradient">Mentor Connect</span>
        </a>

        <!-- Desktop Nav -->
        <nav class="hidden md:flex items-center gap-4">
          <a href="{{ url_for('signin') }}"
            class="px-5 py-2.5 font-medium text-slate-600 rounded-xl hover:bg-slate-100/50 hover:text-primary transition-all duration-200">
            Sign In
          </a>
          <a href="{{ url_for('signup') }}" class="btn btn-primary shadow-lg shadow-blue-500/20">
            Sign Up
          </a>
        </nav>

        <!-- Mobile Menu Button -->
        <button id="menu-btn"
          class="md:hidden p-2 rounded-xl hover:bg-slate-100 transition-colors focus:outline-none text-slate-600">
          <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </div>
    </div>

    <!-- Mobile Nav -->
    <nav id="mobile-menu"
      class="hidden md:hidden bg-white/95 backdrop-blur-xl border-t border-slate-100 shadow-xl absolute w-full left-0">
      <div class="container mx-auto px-4 py-6 space-y-4">
        <a href="{{ url_for('signin') }}"
          class="block px-4 py-3 font-medium text-slate-600 rounded-xl hover:bg-slate-50 transition-colors border border-transparent hover:border-slate-100">
          Sign In
        </a>
        <a href="{{ url_for('signup') }}"
          class="block px-4 py-3 font-medium text-white gradient-primary rounded-xl text-center shadow-lg hover:shadow-xl hover:opacity-90 transition-all">
          Sign Up
        </a>
      </div>
    </nav>
  </header>

  <!-- Main Content (with top padding for fixed header) -->
  <div class="pt-20">
    {% block content %}{% endblock %}
  </div>

  <!-- Script to toggle mobile menu -->
  <script>
    const menuBtn = document.getElementById('menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    menuBtn.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
      const isOpen = !mobileMenu.classList.contains('hidden');
      if (isOpen) {
        mobileMenu.classList.add('animate-slide-up');
      }
    });

    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register("{{ url_for('static', filename='service-worker.js') }}")
        .then(() => console.log("Service worker registered"));
    }
  </script>

  <!-- Customer Support Floating Button -->
  <div id="supportBtn" onclick="redirectToSupport()"
    class="fixed bottom-8 right-8 z-50 animate-float cursor-pointer group">
    <div
      class="absolute inset-0 bg-blue-600 rounded-full blur opacity-40 group-hover:opacity-60 transition-opacity duration-300">
    </div>
    <div
      class="relative bg-gradient-to-tr from-blue-600 to-sky-500 text-white p-4 rounded-full shadow-2xl transition-all duration-300 group-hover:scale-110 flex items-center justify-center">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z">
        </path>
      </svg>
    </div>
  </div>

  <script>
    function redirectToSupport() {
      window.location.href = "{{ url_for('customer_support') }}";
    }
  </script>
</body>

</html>