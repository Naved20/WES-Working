<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% endblock %} | Mentor Connect</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: 'hsl(221, 83%, 53%)',
                        accent: 'hsl(213, 94%, 68%)',
                    }
                }
            }
        }
    </script>
    <!-- Google Font: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Custom Design System -->
    <link rel="stylesheet" href="{{ url_for('static', filename='design-system.css') }}">

    <!-- FullCalendar CSS -->
    <link href='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css' rel='stylesheet' />
    <!-- title icon -->
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='img/logo.jpg') }}">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: hsl(220, 30%, 98%);
        }
    </style>
</head>

<body class="flex flex-col h-screen overflow-hidden text-slate-800">

    <!-- Navbar -->
    <nav class="glass-nav flex justify-between items-center px-6 py-3 z-30 sticky top-0 shadow-sm">
        <!-- Logo -->
        <div class="flex items-center space-x-3">
            <a href="
            {% if session.get('user_type') == '0' %}
                {{ url_for('supervisordashboard') }}
            {% elif session.get('user_type') == '1' %}
                {{ url_for('mentordashboard') }}
            {% elif session.get('user_type') == '2' %}
                {{ url_for('menteedashboard') }}
            {% elif session.get('user_type') == '3' %}
                {{ url_for('institutiondashboard') }}
            {% else %}
                {{ url_for('home') }}
            {% endif %}
            " class="flex items-center gap-3 group">
                <img src="{{ url_for('static', filename='img/logo.jpg') }}" alt="LOGO"
                    class="h-10 w-10 rounded-xl shadow-md group-hover:scale-105 transition-transform">
                <div class="flex flex-col">
                    <span class="text-lg font-bold text-gradient">Mentor Connect</span>
                    <span class="text-xs font-semibold text-slate-500 uppercase tracking-wider">{% block user %}{%
                        endblock %}</span>
                </div>
            </a>
        </div>

        <!-- Toggle Sidebar Button (only on mobile) -->
        {% if show_sidebar %}
        <button id="sidebarToggle"
            class="md:hidden p-2 rounded-xl hover:bg-slate-100/50 text-slate-600 transition-colors">
            <!-- Hamburger Icon -->
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
        </button>
        {% endif %}

        <!-- Profile Dropdown -->
        <div class="relative">
            <button id="profile-dropdown-btn"
                class="group flex items-center gap-3 p-1.5 pr-4 rounded-full hover:bg-slate-100/50 transition-all duration-200 border border-transparent hover:border-slate-200">
                <!-- Top right profile image -->
                <div class="relative">
                    {% if current_user_profile_pic and current_user_profile_pic != 'default.png' %}
                    <img src="{{ url_for('static', filename='uploads/' + current_user_profile_pic) }}"
                        alt="Profile Picture" class="w-9 h-9 rounded-full object-cover ring-2 ring-white shadow-sm">
                    {% else %}
                    <img src="{{ url_for('static', filename='uploads/default.png') }}" alt="Profile Picture"
                        class="w-9 h-9 rounded-full object-cover ring-2 ring-white shadow-sm">
                    {% endif %}
                    <div class="absolute bottom-0 right-0 w-2.5 h-2.5 bg-green-500 border-2 border-white rounded-full">
                    </div>
                </div>

                <span class="text-sm font-medium text-slate-700 group-hover:text-primary hidden sm:block">{{
                    session.get('user_name') or session.get('email') }}</span>
                <svg class="w-4 h-4 text-slate-400 group-hover:text-primary transition-colors hidden sm:block"
                    fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
            </button>

            <!-- Dropdown menu -->
            <div id="profile-menu"
                class="hidden absolute right-0 mt-2 w-56 bg-white/95 backdrop-blur-xl rounded-xl shadow-xl border border-slate-100 py-2 ring-1 ring-black ring-opacity-5 focus:outline-none transition-all duration-200 origin-top-right z-50">

                <div class="px-4 py-3 border-b border-slate-100 mb-1">
                    <p class="text-sm font-medium text-slate-900">Signed in as</p>
                    <p class="text-sm text-slate-500 truncate">{{ session.get('email') }}</p>
                </div>

                <a href="{{ url_for('profile')}}"
                    class="flex items-center px-4 py-2.5 text-sm text-slate-700 hover:bg-slate-50 hover:text-primary transition-colors">
                    <svg class="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                    </svg>
                    My Profile
                </a>

                <a href="{{ url_for('change_password')}}"
                    class="flex items-center px-4 py-2.5 text-sm text-slate-700 hover:bg-slate-50 hover:text-primary transition-colors">
                    <svg class="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                    </svg>
                    Change Password
                </a>

                <div class="border-t border-slate-100 mt-1 pt-1">
                    <a href="{{ url_for('logout')}}"
                        class="flex items-center px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 transition-colors">
                        <svg class="w-4 h-4 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                        </svg>
                        Sign out
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Container for Sidebar and Content -->
    <div class="flex flex-1 overflow-hidden relative">
        {% if show_sidebar %}
        <!-- Sidebar -->
        <aside id="sidebar" class="sidebar w-72 flex-shrink-0 flex flex-col transition-all duration-300 ease-in-out z-20
                          fixed inset-y-0 left-0 transform -translate-x-full md:relative md:translate-x-0
                          overflow-y-auto custom-scrollbar border-r border-slate-200/10 shadow-xl">

            <div class="p-4 space-y-1">
                {% if session.get('user_type') == '0' %}
                <!-- Supervisor Dashboard -->
                <div class="px-4 py-2 text-xs font-bold text-white/40 uppercase tracking-widest mb-2 mt-2">Menu</div>

                <a href="{{ url_for('supervisordashboard')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'supervisordashboard' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
                    </svg>
                    Dashboard
                </a>

                <a href="{{ url_for('supervisor_find_mentor')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'supervisor_find_mentor' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                    </svg>
                    All Mentors
                </a>

                <a href="{{ url_for('supervisor_find_mentee')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'supervisor_find_mentee' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                    </svg>
                    All Mentees
                </a>

                <a href="{{ url_for('institution')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'institution' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                    </svg>
                    All Institutions
                </a>

                <a href="{{ url_for('view_requests')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'view_requests' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                    </svg>
                    All Requests
                </a>

                <a href="{{ url_for('supervisor_meeting_details')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'supervisor_meeting_details' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
                    </svg>
                    All Meetings
                </a>

                <a href="{{ url_for('supervisor_calendar')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'supervisor_calendar' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                    </svg>
                    All Calendar
                </a>
                <a href="{{ url_for('supervisor_tasks')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'supervisor_tasks' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    All Tasks
                </a>

                <a href="{{ url_for('chat')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'chat' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
                    </svg>
                    Messages
                </a>

                <div class="px-4 py-2 text-xs font-bold text-white/40 uppercase tracking-widest mb-2 mt-6">Admin</div>

                <a href="{{ url_for('create_account')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'create_account' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z" />
                    </svg>
                    Create Account
                </a>

                <a href="{{ url_for('manage_created_accounts')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'manage_created_accounts' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4" />
                    </svg>
                    Manage Accounts
                </a>


                {% elif session.get('user_type') == '1' %}

                <!-- Mentor Dashboard -->
                <div class="px-4 py-2 text-xs font-bold text-white/40 uppercase tracking-widest mb-2 mt-2">Mentoring
                </div>

                <a href="{{ url_for('mentordashboard')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'mentordashboard' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
                    </svg>
                    Dashboard
                </a>

                <a href="{{ url_for('find_mentees')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'find_mentees' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                    Find Mentee
                </a>
                <a href="{{ url_for('mentor_mentorship_request')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'mentor_mentorship_request' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                    </svg>
                    Mentoring request
                </a>

                <a href="{{ url_for('my_mentees')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'my_mentees' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M17 20h5v-2a3 3 0 00-5.856-1.487M15 10a3 3 0 11-6 0 3 3 0 016 0zM6 20a6 6 0 0112 0v2H6v-2z" />
                    </svg>
                    My Mentees
                </a>

                <a href="{{ url_for('mentor_meeting_details')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'mentor_meeting_details' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
                    </svg>
                    My Meetings
                </a>
                <a href="{{ url_for('mentor_calendar')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'mentor_calendar' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                    </svg>
                    My Calendar
                </a>

                <a href="{{ url_for('mentor_tasks')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'mentor_tasks' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    My Tasks
                </a>

                <a href="{{ url_for('chat')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'chat' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
                    </svg>
                    Messages
                </a>

                {% elif session.get('user_type') == '3' %}

                <div class="px-4 py-2 text-xs font-bold text-white/40 uppercase tracking-widest mb-2 mt-2">Institution
                </div>

                <a href="{{ url_for('institutiondashboard')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'institutiondashboard' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
                    </svg>
                    Institute Dashboard
                </a>

                <a href="{{ url_for('institution_mentors')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'institution_mentors' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                    </svg>
                    Institute Mentors
                </a>

                <a href="{{ url_for('institution_mentees')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'institution_mentees' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                    </svg>
                    Institute Mentees
                </a>


                <a href="{{ url_for('institution_mentorships')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'institution_mentorships' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m0 0l-2-1m2 1v2.5M14 4l-2 1m0 0L10 4m2 1v2.5m6 0l-2 1m0 0l-2-1m2 1v2.5" />
                    </svg>
                    Institute Mentorships
                </a>


                <a href="{{ url_for('institution_calendar') }}"
                    class="sidebar-nav-item {% if request.endpoint == 'institution_calendar' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                    </svg>
                    Institute Calendar
                </a>

                <a href="{{ url_for('institution_all_tasks') }}"
                    class="sidebar-nav-item {% if request.endpoint == 'institution_all_tasks' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    Institute Tasks
                </a>

                <a href="{{ url_for('chat')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'chat' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
                    </svg>
                    Messages
                </a>

                {% elif session.get('user_type') == '2' %}

                <div class="px-4 py-2 text-xs font-bold text-white/40 uppercase tracking-widest mb-2 mt-2">Learning
                </div>

                <a href="{{ url_for('menteedashboard')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'menteedashboard' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
                    </svg>
                    Dashboard
                </a>

                <a href="{{ url_for('find_mentor')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'find_mentor' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                    Find Mentor
                </a>

                <a href="{{ url_for('my_mentors')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'my_mentors' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                    </svg>
                    My Mentors
                </a>

                <a href="{{ url_for('mentee_meeting_details')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'mentee_meeting_details' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />
                    </svg>
                    My Meetings
                </a>

                <a href="{{ url_for('mentee_calendar')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'mentee_calendar' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                    </svg>
                    My Calendar
                </a>
                <a href="{{ url_for('mentee_tasks')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'mentee_tasks' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    My Tasks
                </a>

                <a href="{{ url_for('chat')}}"
                    class="sidebar-nav-item {% if request.endpoint == 'chat' %}active{% endif %}">
                    <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
                    </svg>
                    Messages
                </a>

                {% endif %}
            </div>
        </aside>

        <!-- Overlay (SEPARATE) -->
        <div id="overlay" class="fixed inset-0 bg-slate-900/50 backdrop-blur-sm hidden z-10 md:hidden"></div>
        {% endif %}

        <!-- Main Content Area -->
        <main class="flex-1 p-6 md:p-10 overflow-y-auto pb-32">
            {% block content %}{% endblock %}
        </main>
    </div>

    <!-- Profile Completion Popup -->
    {% if session.get('user_type') in ['1', '2'] and profile_complete == False %}
    <div id="profile-complete-popup"
        class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center popup-z-index z-[9999]">
        <div class="bg-white p-8 rounded-2xl shadow-2xl max-w-md w-full mx-4 animate-scale-in border border-slate-100">
            <div class="flex items-center mb-6">
                <div class="bg-amber-100 p-3 rounded-xl mr-4">
                    <svg class="w-8 h-8 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z">
                        </path>
                    </svg>
                </div>
                <h3 class="text-xl font-bold text-slate-800">Complete Your Profile</h3>
            </div>

            <p class="text-slate-600 mb-8 leading-relaxed">
                {% if session.get('user_type') == '1' %}
                Your mentor profile is incomplete. Please complete your profile to access all features and connect with
                mentees.
                {% else %}
                Your mentee profile is incomplete. Please complete your profile to access all features and connect with
                mentors.
                {% endif %}
            </p>

            <div class="flex justify-end gap-4">
                <button id="remind-later-btn" type="button" class="btn btn-ghost text-slate-600 hover:text-slate-800">
                    Remind Me Later
                </button>
                <a href="{{ url_for('profile') }}" class="btn btn-primary shadow-lg shadow-blue-500/20">
                    Complete Profile
                </a>
            </div>
        </div>
    </div>
    {% endif %}

    <script>
        // Profile Dropdown Functionality
        const profileBtn = document.getElementById('profile-dropdown-btn');
        const profileMenu = document.getElementById('profile-menu');
        let isMenuOpen = false;

        if (profileBtn && profileMenu) {
            profileBtn.addEventListener('click', (event) => {
                event.stopPropagation();
                isMenuOpen = !isMenuOpen;
                if (isMenuOpen) {
                    profileMenu.classList.remove('hidden');
                    profileMenu.classList.add('animate-scale-in');
                } else {
                    profileMenu.classList.add('hidden');
                    profileMenu.classList.remove('animate-scale-in');
                }
            });

            // Close the dropdown if the user clicks outside of it
            document.addEventListener('click', (event) => {
                if (isMenuOpen && !profileMenu.contains(event.target) && event.target !== profileBtn) {
                    isMenuOpen = false;
                    profileMenu.classList.add('hidden');
                    profileMenu.classList.remove('animate-scale-in');
                }
            });
        }

        // Sidebar Functionality
        const sidebar = document.getElementById("sidebar");
        const toggleBtn = document.getElementById("sidebarToggle");
        const overlay = document.getElementById("overlay");

        if (toggleBtn && sidebar && overlay) {
            toggleBtn.addEventListener("click", () => {
                sidebar.classList.toggle("-translate-x-full");
                overlay.classList.toggle("hidden");
            });

            overlay.addEventListener("click", () => {
                sidebar.classList.add("-translate-x-full");
                overlay.classList.add("hidden");
            });
        }

        // Profile Completion Popup Handling
        document.addEventListener('DOMContentLoaded', function () {
            const profilePopup = document.getElementById('profile-complete-popup');
            const remindLaterBtn = document.getElementById('remind-later-btn');
            const completeProfileBtn = profilePopup ? profilePopup.querySelector('a[href*="profile"]') : null;

            if (profilePopup && remindLaterBtn) {
                // Check if user previously chose "Remind Me Later" in this session
                if (sessionStorage.getItem('profileRemindLater') === 'true') {
                    profilePopup.classList.add('hidden');
                } else {
                    profilePopup.classList.remove('hidden');
                }

                remindLaterBtn.addEventListener('click', function () {
                    profilePopup.classList.add('hidden');
                    sessionStorage.setItem('profileRemindLater', 'true');
                });

                if (completeProfileBtn) {
                    completeProfileBtn.addEventListener('click', function () {
                        profilePopup.classList.add('hidden');
                        sessionStorage.setItem('profileRemindLater', 'true');
                    });
                }
            }
        });
    </script>
    <!-- FullCalendar JS -->
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js'></script>
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/locales-all.min.js'></script>

    <!-- Customer Support Floating Button -->
    <div id="supportBtn" onclick="redirectToSupport()"
        class="fixed bottom-8 right-8 z-50 animate-float cursor-pointer group">
        <div
            class="absolute inset-0 bg-blue-600 rounded-full blur opacity-40 group-hover:opacity-60 transition-opacity duration-300">
        </div>
        <div
            class="relative bg-gradient-to-tr from-blue-600 to-sky-500 text-white p-4 rounded-full shadow-2xl transition-all duration-300 group-hover:scale-110 flex items-center justify-center">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z">
                </path>
            </svg>
        </div>
    </div>

    <script>
        function redirectToSupport() {
            window.location.href = "{{ url_for('customer_support') }}";
        }
    </script>
</body>

</html>