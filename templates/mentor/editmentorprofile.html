{% extends "base2.html" %}
{% block title %}Edit Mentor Profile{% endblock %}

{% block user %}Edit Mentor Profile{% endblock %}

{% block Sidebar %}
    <a href="{{ url_for('profile')}}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition duration-150 ease-in-out">ğŸ‘¤ My Profile</a>
    <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition duration-150 ease-in-out">âš™ï¸ Settings</a>
    <a href="{{ url_for('logout')}}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition duration-150 ease-in-out">ğŸšª Sign out</a>
{% endblock %}

{% block content %}

<style>
    select[multiple] {
        height: auto;
        min-height: 120px;
        background-image: none;
        padding-right: 0.75rem;
    }
    
    select:focus {
        outline: none;
        border-color: #3b82f6;
        box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
    }
    
    .transition {
        transition: all 0.3s ease;
    }
    
    .shadow-2xl {
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    }
    
    optgroup {
        font-weight: bold;
        color: #4b5563;
    }
    
    optgroup option {
        font-weight: normal;
        padding-left: 1rem;
    }
</style>

<div class="max-w-6xl mx-auto mt-8 p-6 bg-gradient-to-br from-gray-50 to-blue-50 rounded-2xl shadow-2xl">
    <form id="mentorProfileForm" action="{{ url_for('editmentorprofile') }}" method="POST" enctype="multipart/form-data" class="space-y-8" onsubmit="return validateForm()">
        <!-- Profile Header -->
        <div class="flex flex-col items-center md:flex-row md:items-center md:justify-start space-y-6 md:space-y-0 md:space-x-8 mb-8 p-6 bg-white rounded-xl shadow-md">
            <!-- Profile Picture Upload -->
            <div class="text-center">
                <div class="relative inline-block">
                    {% if profile_picture %}
                    <img src="{{ url_for('static', filename='uploads/' + profile_picture) }}" 
                         alt="Profile Picture" 
                         class="w-32 h-32 md:w-40 md:h-40 object-cover rounded-full shadow-lg border-4 border-blue-200 hover:border-blue-400 transition duration-300">
                    {% else %}
                    <div class="w-32 h-32 md:w-40 md:h-40 flex items-center justify-center bg-gradient-to-br from-blue-100 to-purple-100 text-blue-600 rounded-full text-lg font-semibold shadow-lg border-4 border-blue-200">
                        <i class="fas fa-user text-4xl"></i>
                    </div>
                    {% endif %}
                    <div class="absolute bottom-2 right-2 bg-blue-500 text-white p-2 rounded-full shadow-lg">
                        <i class="fas fa-camera text-sm"></i>
                    </div>
                </div>
                <div class="mt-4">
                    <label class="bg-blue-500 text-white px-4 py-2 rounded-lg cursor-pointer hover:bg-blue-600 transition duration-300 inline-block">
                        <i class="fas fa-upload mr-2"></i>Upload Photo
                        {% if profile_picture %}
                        <input type="file" name="profile_picture" class="hidden" onchange="previewImage(this)" accept="image/*">
                        {% else %}
                        <input type="file" name="profile_picture" class="hidden" onchange="previewImage(this)" required accept="image/*">
                        {% endif %}
                    </label>
                </div>
                {% if profile_picture %}
                <p class="text-xs text-gray-500 mt-2">Leave empty to keep current picture</p>
                {% else %}
                <p class="text-xs text-red-500 mt-2">* Profile picture is required</p>
                {% endif %}
            </div>

            <!-- Basic Information -->
            <div class="text-center md:text-left w-full space-y-4">
                <div>
                    <label class="block text-gray-700 font-bold text-lg mb-2">Full Name</label>
                    <input type="text" name="full_name" value="{{ full_name }}" class="w-full p-3 border-2 border-gray-200 rounded-xl bg-gray-50 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" readonly>
                </div>
                <div>
                    <label class="block text-gray-700 font-bold text-lg mb-2">Email</label>
                    <input type="email" name="email" value="{{ email }}" class="w-full p-3 border-2 border-gray-200 rounded-xl bg-gray-50 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" readonly>
                </div>
            </div>
        </div>

        <!-- Professional Information -->
        <div class="bg-white p-8 rounded-2xl shadow-lg border border-blue-100">
            <h3 class="text-3xl font-bold text-gray-800 mb-6 pb-3 border-b-2 border-blue-100">
                <i class="fas fa-briefcase text-blue-500 mr-3"></i>Professional Information
            </h3>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="space-y-4">
                    {% set profession_options = ['Software Engineer', 'Data Scientist', 'AI/ML Engineer', 'Web Developer', 'DevOps Engineer', 'Cybersecurity Analyst', 'Doctor', 'Surgeon', 'Dentist', 'Pharmacist', 'Medical Researcher', 'Business Consultant', 'Product Manager', 'Marketing Manager', 'Financial Analyst', 'Entrepreneur', 'Professor', 'Teacher', 'Education Consultant', 'Researcher'] %}
                    {% set is_other_profession = profession and profession not in profession_options %}
                        <div>
                            <label class="block text-gray-700 font-semibold mb-2">Profession *</label>
                            <select name="profession" id="profession_select" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300">
                                <option value="">Select Your Profession</option>
                                <optgroup label="Technology">
                                    <option value="Software Engineer" {% if profession == 'Software Engineer' %}selected{% endif %}>Software Engineer/Developer</option>
                                    <option value="Data Scientist" {% if profession == 'Data Scientist' %}selected{% endif %}>Data Scientist/Analyst</option>
                                    <option value="AI/ML Engineer" {% if profession == 'AI/ML Engineer' %}selected{% endif %}>AI/ML Engineer</option>
                                    <option value="Web Developer" {% if profession == 'Web Developer' %}selected{% endif %}>Web Developer</option>
                                    <option value="DevOps Engineer" {% if profession == 'DevOps Engineer' %}selected{% endif %}>DevOps Engineer</option>
                                    <option value="Cybersecurity Analyst" {% if profession == 'Cybersecurity Analyst' %}selected{% endif %}>Cybersecurity Analyst</option>
                                    <option value="IT Manager" {% if profession == 'IT Manager' %}selected{% endif %}>IT Manager/Team Lead</option>
                                    <option value="System Administrator" {% if profession == 'System Administrator' %}selected{% endif %}>System Administrator</option>
                                </optgroup>
                                <optgroup label="Healthcare">
                                    <option value="Doctor" {% if profession == 'Doctor' %}selected{% endif %}>Doctor/Physician</option>
                                    <option value="Surgeon" {% if profession == 'Surgeon' %}selected{% endif %}>Surgeon</option>
                                    <option value="Dentist" {% if profession == 'Dentist' %}selected{% endif %}>Dentist</option>
                                    <option value="Pharmacist" {% if profession == 'Pharmacist' %}selected{% endif %}>Pharmacist</option>
                                    <option value="Medical Researcher" {% if profession == 'Medical Researcher' %}selected{% endif %}>Medical Researcher</option>
                                    <option value="Nurse" {% if profession == 'Nurse' %}selected{% endif %}>Nurse/Nursing Staff</option>
                                    <option value="Medical Technician" {% if profession == 'Medical Technician' %}selected{% endif %}>Medical Technician</option>
                                    <option value="Hospital Administrator" {% if profession == 'Hospital Administrator' %}selected{% endif %}>Hospital Administrator/Manager</option>
                                </optgroup>
                                <optgroup label="Business">
                                    <option value="Business Consultant" {% if profession == 'Business Consultant' %}selected{% endif %}>Business Consultant/Advisor</option>
                                    <option value="Product Manager" {% if profession == 'Product Manager' %}selected{% endif %}>Product Manager</option>
                                    <option value="Marketing Manager" {% if profession == 'Marketing Manager' %}selected{% endif %}>Marketing Manager/Team</option>
                                    <option value="Financial Analyst" {% if profession == 'Financial Analyst' %}selected{% endif %}>Financial Analyst/Advisor</option>
                                    <option value="Entrepreneur" {% if profession == 'Entrepreneur' %}selected{% endif %}>Entrepreneur/Business Owner</option>
                                    <option value="Sales Manager" {% if profession == 'Sales Manager' %}selected{% endif %}>Sales Manager/Team</option>
                                    <option value="HR Manager" {% if profession == 'HR Manager' %}selected{% endif %}>HR Manager/Team</option>
                                    <option value="Operations Manager" {% if profession == 'Operations Manager' %}selected{% endif %}>Operations Manager</option>
                                </optgroup>
                                <optgroup label="Education">
                                    <option value="Professor" {% if profession == 'Professor' %}selected{% endif %}>Professor/Lecturer</option>
                                    <option value="Teacher" {% if profession == 'Teacher' %}selected{% endif %}>Teacher/Educator</option>
                                    <option value="Education Consultant" {% if profession == 'Education Consultant' %}selected{% endif %}>Education Consultant/Advisor</option>
                                    <option value="University Student" {% if profession == 'University Student' %}selected{% endif %}>University Student</option>
                                    <option value="Researcher" {% if profession == 'Researcher' %}selected{% endif %}>Researcher/Scholar</option>
                                    <option value="School Administrator" {% if profession == 'School Administrator' %}selected{% endif %}>School Administrator/Principal</option>
                                    <option value="Counselor" {% if profession == 'Counselor' %}selected{% endif %}>Counselor/Advisor</option>
                                </optgroup>
                                <optgroup label="Creative & Media">
                                    <option value="Graphic Designer" {% if profession == 'Graphic Designer' %}selected{% endif %}>Graphic Designer</option>
                                    <option value="Content Writer" {% if profession == 'Content Writer' %}selected{% endif %}>Content Writer/Editor</option>
                                    <option value="Journalist" {% if profession == 'Journalist' %}selected{% endif %}>Journalist/Reporter</option>
                                    <option value="Photographer" {% if profession == 'Photographer' %}selected{% endif %}>Photographer</option>
                                    <option value="Video Editor" {% if profession == 'Video Editor' %}selected{% endif %}>Video Editor/Producer</option>
                                </optgroup>
                                <optgroup label="Legal">
                                    <option value="Lawyer" {% if profession == 'Lawyer' %}selected{% endif %}>Lawyer/Attorney</option>
                                    <option value="Legal Advisor" {% if profession == 'Legal Advisor' %}selected{% endif %}>Legal Advisor/Consultant</option>
                                    <option value="Judge" {% if profession == 'Judge' %}selected{% endif %}>Judge</option>
                                    <option value="Paralegal" {% if profession == 'Paralegal' %}selected{% endif %}>Paralegal/Legal Assistant</option>
                                </optgroup>
                                <optgroup label="Government & Public Service">
                                    <option value="Government Officer" {% if profession == 'Government Officer' %}selected{% endif %}>Government Officer</option>
                                    <option value="Police Officer" {% if profession == 'Police Officer' %}selected{% endif %}>Police Officer</option>
                                    <option value="Social Worker" {% if profession == 'Social Worker' %}selected{% endif %}>Social Worker</option>
                                    <option value="Public Administrator" {% if profession == 'Public Administrator' %}selected{% endif %}>Public Administrator</option>
                                </optgroup>
                                <option value="Other" {% if is_other_profession %}selected{% endif %}>Other (Please specify)</option>
                            </select>
                        </div>

                    <!-- Other Profession Field -->
                    <div id="other_profession_field" style="display: {% if is_other_profession %}block{% else %}none{% endif %};">
                        <label class="block text-gray-700 font-semibold mb-2">Specify Your Profession</label>
                        <input type="text" name="other_profession" id="other_profession" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="Enter your profession" value="{% if is_other_profession %}{{ profession }}{% endif %}">
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Skills *</label>
                        <textarea name="skills" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" rows="3" placeholder="Python, Machine Learning, Career Guidance, Interview Preparation...">{{ skills }}</textarea>
                        <p class="text-sm text-gray-500 mt-1"><i class="fas fa-info-circle mr-1"></i>Separate skills with commas</p>
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Role/Position *</label>
                        <input type="text" name="role" value="{{ role }}" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="Senior Software Engineer, Product Manager...">
                    </div>
                </div>
                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Industry/Sector *</label>
                        <select name="industry_sector" id="industry_sector_select" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300">
                            <option value="">Select Industry</option>
                            <option value="Technology" {% if industry_sector == 'Technology' %}selected{% endif %}>ğŸ’» Technology</option>
                            <option value="Healthcare" {% if industry_sector == 'Healthcare' %}selected{% endif %}>ğŸ¥ Healthcare</option>
                            <option value="Education" {% if industry_sector == 'Education' %}selected{% endif %}>ğŸ“ Education</option>
                            <option value="Finance" {% if industry_sector == 'Finance' %}selected{% endif %}>ğŸ’° Finance</option>
                            <option value="Business" {% if industry_sector == 'Business' %}selected{% endif %}>ğŸ’¼ Business</option>
                            <option value="Creative Arts" {% if industry_sector == 'Creative Arts' %}selected{% endif %}>ğŸ¨ Creative Arts</option>
                            <option value="Science & Research" {% if industry_sector == 'Science & Research' %}selected{% endif %}>ğŸ”¬ Science & Research</option>
                            <option value="Government" {% if industry_sector == 'Government' %}selected{% endif %}>ğŸ›ï¸ Government</option>
                            <option value="Non-Profit" {% if industry_sector == 'Non-Profit' %}selected{% endif %}>ğŸ¤ Non-Profit</option>
                            <option value="Manufacturing" {% if industry_sector == 'Manufacturing' %}selected{% endif %}>ğŸ­ Manufacturing</option>
                            <option value="Retail" {% if industry_sector == 'Retail' %}selected{% endif %}>ğŸ›ï¸ Retail</option>
                            <option value="Hospitality" {% if industry_sector == 'Hospitality' %}selected{% endif %}>ğŸ¨ Hospitality</option>
                            <option value="Legal" {% if industry_sector == 'Legal' %}selected{% endif %}>âš–ï¸ Legal</option>
                            <option value="Media & Entertainment" {% if industry_sector == 'Media & Entertainment' %}selected{% endif %}>ğŸ¬ Media & Entertainment</option>
                            <option value="Real Estate" {% if industry_sector == 'Real Estate' %}selected{% endif %}>ğŸ  Real Estate</option>
                            <option value="Agriculture" {% if industry_sector == 'Agriculture' %}selected{% endif %}>ğŸŒ¾ Agriculture</option>
                            <option value="Other" {% if industry_sector and industry_sector not in ['Technology', 'Healthcare', 'Education', 'Finance', 'Business', 'Creative Arts', 'Science & Research', 'Government', 'Non-Profit', 'Manufacturing', 'Retail', 'Hospitality', 'Legal', 'Media & Entertainment', 'Real Estate', 'Agriculture'] %}selected{% endif %}>ğŸ”¶ Other</option>
                        </select>
                    </div>

                    <!-- Other Industry/Sector Field -->
                    <div id="other_industry_sector_field" style="display: {% if industry_sector and industry_sector not in ['Technology', 'Healthcare', 'Education', 'Finance', 'Business', 'Creative Arts', 'Science & Research', 'Government', 'Non-Profit', 'Manufacturing', 'Retail', 'Hospitality', 'Legal', 'Media & Entertainment', 'Real Estate', 'Agriculture', ''] %}block{% else %}none{% endif %};">
                        <label class="block text-gray-700 font-semibold mb-2">Specify Your Industry/Sector</label>
                        <input type="text" name="other_industry_sector" id="other_industry_sector" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="Enter your industry/sector" value="{% if industry_sector and industry_sector not in ['Technology', 'Healthcare', 'Education', 'Finance', 'Business', 'Creative Arts', 'Science & Research', 'Government', 'Non-Profit', 'Manufacturing', 'Retail', 'Hospitality', 'Legal', 'Media & Entertainment', 'Real Estate', 'Agriculture', ''] %}{{ industry_sector }}{% endif %}">
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Organisation/Company *</label>
                        <input type="text" name="organisation" value="{{ organisation }}" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300">
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Years of Experience *</label>
                        <select name="years_of_experience" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300">
                            <option value="">Select Experience</option>
                            <option value="0-2" {% if years_of_experience == '0-2' %}selected{% endif %}>0-2 years (Beginner)</option>
                            <option value="3-5" {% if years_of_experience == '3-5' %}selected{% endif %}>3-5 years (Intermediate)</option>
                            <option value="6-10" {% if years_of_experience == '6-10' %}selected{% endif %}>6-10 years (Experienced)</option>
                            <option value="11-15" {% if years_of_experience == '11-15' %}selected{% endif %}>11-15 years (Senior)</option>
                            <option value="15+" {% if years_of_experience == '15+' %}selected{% endif %}>15+ years (Expert)</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">affiliated Institution *</label>
                        <select name="institution" id="institution" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" required>
                            <option value="">Select Your Institution</option>
                            <option value="Self" {% if institution == 'Self' %}selected{% endif %}>Self (Not affiliated with any institution)</option>
                            {% for inst in institutions %}
                                <option value="{{ inst.name }}" 
                                    {% if institution == inst.name %}selected{% endif %}>
                                    {{ inst.name }}
                                </option>
                            {% endfor %}
                            <option value="Other" 
                                {% if institution and institution not in institutions|map(attribute='name')|list %}selected{% endif %}>
                                Other
                            </option>
                        </select>
                    </div>

                    <!-- Other Institution Field -->
                    <div id="other_institution_field" style="display: {% if institution and institution not in institutions|map(attribute='name')|list %}block{% else %}none{% endif %};">
                        <label class="block text-gray-700 font-semibold mb-2">Specify Your Institution</label>
                        <input type="text" name="other_institution_name" id="other_institution_name" 
                               class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300"
                               placeholder="Enter your institution name"
                               value="{% if institution and institution not in institutions|map(attribute='name')|list %}{{ institution }}{% endif %}">
                    </div>
                </div>
            </div>
        </div>

        <!-- Contact & Location Information -->
        <div class="bg-white p-8 rounded-2xl shadow-lg border border-blue-100">
            <h3 class="text-3xl font-bold text-gray-800 mb-6 pb-3 border-b-2 border-blue-100">
                <i class="fas fa-map-marker-alt text-green-500 mr-3"></i>Contact & Location
            </h3>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">WhatsApp Number *</label>
                        <div class="flex gap-2">
                            <input type="text" name="whatsapp_country_code" list="country_codes" value="{{ whatsapp_country_code or '+91' }}" class="w-24 p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="+91">
                            <input type="tel" name="whatsapp" value="{{ whatsapp }}" class="flex-1 p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="Enter WhatsApp number">
                        </div>
                    </div>

                    {% set country_options = ['India', 'Pakistan', 'Bangladesh', 'Nepal', 'Sri Lanka', 'China', 'Japan', 'South Korea', 'Singapore', 'Malaysia', 'Indonesia', 'Philippines', 'Thailand', 'Vietnam', 'UAE', 'Saudi Arabia', 'Qatar', 'Kuwait', 'Oman', 'Bahrain', 'Israel', 'Turkey', 'UK', 'Germany', 'France', 'Italy', 'Spain', 'Netherlands', 'Belgium', 'Luxembourg', 'Switzerland', 'Austria', 'Sweden', 'Norway', 'Denmark', 'Finland', 'Poland', 'Portugal', 'Greece', 'Czech Republic', 'Hungary', 'Russia', 'Ukraine', 'Ireland', 'USA', 'Canada', 'Mexico', 'Brazil', 'Argentina', 'Chile', 'Colombia', 'Australia', 'New Zealand', 'South Africa', 'Nigeria', 'Kenya', 'Egypt', 'Morocco'] %}
                    {% set is_other_country = country and country not in country_options %}
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Country *</label>
                        <select name="country" id="country_select" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300">
                            <option value="">Select Country</option>
                            <optgroup label="Asia">
                                <option value="India" {% if country == 'India' %}selected{% endif %}>ğŸ‡®ğŸ‡³ India</option>
                                <option value="Pakistan" {% if country == 'Pakistan' %}selected{% endif %}>ğŸ‡µğŸ‡° Pakistan</option>
                                <option value="Bangladesh" {% if country == 'Bangladesh' %}selected{% endif %}>ğŸ‡§ğŸ‡© Bangladesh</option>
                                <option value="Nepal" {% if country == 'Nepal' %}selected{% endif %}>ğŸ‡³ğŸ‡µ Nepal</option>
                                <option value="Sri Lanka" {% if country == 'Sri Lanka' %}selected{% endif %}>ğŸ‡±ğŸ‡° Sri Lanka</option>
                                <option value="China" {% if country == 'China' %}selected{% endif %}>ğŸ‡¨ğŸ‡³ China</option>
                                <option value="Japan" {% if country == 'Japan' %}selected{% endif %}>ğŸ‡¯ğŸ‡µ Japan</option>
                                <option value="South Korea" {% if country == 'South Korea' %}selected{% endif %}>ğŸ‡°ğŸ‡· South Korea</option>
                                <option value="Singapore" {% if country == 'Singapore' %}selected{% endif %}>ğŸ‡¸ğŸ‡¬ Singapore</option>
                                <option value="Malaysia" {% if country == 'Malaysia' %}selected{% endif %}>ğŸ‡²ğŸ‡¾ Malaysia</option>
                                <option value="Indonesia" {% if country == 'Indonesia' %}selected{% endif %}>ğŸ‡®ğŸ‡© Indonesia</option>
                                <option value="Philippines" {% if country == 'Philippines' %}selected{% endif %}>ğŸ‡µğŸ‡­ Philippines</option>
                                <option value="Thailand" {% if country == 'Thailand' %}selected{% endif %}>ğŸ‡¹ğŸ‡­ Thailand</option>
                                <option value="Vietnam" {% if country == 'Vietnam' %}selected{% endif %}>ğŸ‡»ğŸ‡³ Vietnam</option>
                            </optgroup>
                            <optgroup label="Middle East">
                                <option value="UAE" {% if country == 'UAE' %}selected{% endif %}>ğŸ‡¦ğŸ‡ª UAE</option>
                                <option value="Saudi Arabia" {% if country == 'Saudi Arabia' %}selected{% endif %}>ğŸ‡¸ğŸ‡¦ Saudi Arabia</option>
                                <option value="Qatar" {% if country == 'Qatar' %}selected{% endif %}>ğŸ‡¶ğŸ‡¦ Qatar</option>
                                <option value="Kuwait" {% if country == 'Kuwait' %}selected{% endif %}>ğŸ‡°ğŸ‡¼ Kuwait</option>
                                <option value="Oman" {% if country == 'Oman' %}selected{% endif %}>ğŸ‡´ğŸ‡² Oman</option>
                                <option value="Bahrain" {% if country == 'Bahrain' %}selected{% endif %}>ğŸ‡§ğŸ‡­ Bahrain</option>
                                <option value="Israel" {% if country == 'Israel' %}selected{% endif %}>ğŸ‡®ğŸ‡± Israel</option>
                                <option value="Turkey" {% if country == 'Turkey' %}selected{% endif %}>ğŸ‡¹ğŸ‡· Turkey</option>
                            </optgroup>
                            <optgroup label="Europe">
                                <option value="UK" {% if country == 'UK' %}selected{% endif %}>ğŸ‡¬ğŸ‡§ United Kingdom</option>
                                <option value="Germany" {% if country == 'Germany' %}selected{% endif %}>ğŸ‡©ğŸ‡ª Germany</option>
                                <option value="France" {% if country == 'France' %}selected{% endif %}>ğŸ‡«ğŸ‡· France</option>
                                <option value="Italy" {% if country == 'Italy' %}selected{% endif %}>ğŸ‡®ğŸ‡¹ Italy</option>
                                <option value="Spain" {% if country == 'Spain' %}selected{% endif %}>ğŸ‡ªğŸ‡¸ Spain</option>
                                <option value="Netherlands" {% if country == 'Netherlands' %}selected{% endif %}>ğŸ‡³ğŸ‡± Netherlands</option>
                                <option value="Belgium" {% if country == 'Belgium' %}selected{% endif %}>ğŸ‡§ğŸ‡ª Belgium</option>
                                <option value="Luxembourg" {% if country == 'Luxembourg' %}selected{% endif %}>ğŸ‡±ğŸ‡º Luxembourg</option>
                                <option value="Switzerland" {% if country == 'Switzerland' %}selected{% endif %}>ğŸ‡¨ğŸ‡­ Switzerland</option>
                                <option value="Austria" {% if country == 'Austria' %}selected{% endif %}>ğŸ‡¦ğŸ‡¹ Austria</option>
                                <option value="Sweden" {% if country == 'Sweden' %}selected{% endif %}>ğŸ‡¸ğŸ‡ª Sweden</option>
                                <option value="Norway" {% if country == 'Norway' %}selected{% endif %}>ğŸ‡³ğŸ‡´ Norway</option>
                                <option value="Denmark" {% if country == 'Denmark' %}selected{% endif %}>ğŸ‡©ğŸ‡° Denmark</option>
                                <option value="Finland" {% if country == 'Finland' %}selected{% endif %}>ğŸ‡«ğŸ‡® Finland</option>
                                <option value="Poland" {% if country == 'Poland' %}selected{% endif %}>ğŸ‡µğŸ‡± Poland</option>
                                <option value="Portugal" {% if country == 'Portugal' %}selected{% endif %}>ğŸ‡µğŸ‡¹ Portugal</option>
                                <option value="Greece" {% if country == 'Greece' %}selected{% endif %}>ğŸ‡¬ğŸ‡· Greece</option>
                                <option value="Czech Republic" {% if country == 'Czech Republic' %}selected{% endif %}>ğŸ‡¨ğŸ‡¿ Czech Republic</option>
                                <option value="Hungary" {% if country == 'Hungary' %}selected{% endif %}>ğŸ‡­ğŸ‡º Hungary</option>
                                <option value="Russia" {% if country == 'Russia' %}selected{% endif %}>ğŸ‡·ğŸ‡º Russia</option>
                                <option value="Ukraine" {% if country == 'Ukraine' %}selected{% endif %}>ğŸ‡ºğŸ‡¦ Ukraine</option>
                                <option value="Ireland" {% if country == 'Ireland' %}selected{% endif %}>ğŸ‡®ğŸ‡ª Ireland</option>
                            </optgroup>
                            <optgroup label="Americas">
                                <option value="USA" {% if country == 'USA' %}selected{% endif %}>ğŸ‡ºğŸ‡¸ United States</option>
                                <option value="Canada" {% if country == 'Canada' %}selected{% endif %}>ğŸ‡¨ğŸ‡¦ Canada</option>
                                <option value="Mexico" {% if country == 'Mexico' %}selected{% endif %}>ğŸ‡²ğŸ‡½ Mexico</option>
                                <option value="Brazil" {% if country == 'Brazil' %}selected{% endif %}>ğŸ‡§ğŸ‡· Brazil</option>
                                <option value="Argentina" {% if country == 'Argentina' %}selected{% endif %}>ğŸ‡¦ğŸ‡· Argentina</option>
                                <option value="Chile" {% if country == 'Chile' %}selected{% endif %}>ğŸ‡¨ğŸ‡± Chile</option>
                                <option value="Colombia" {% if country == 'Colombia' %}selected{% endif %}>ğŸ‡¨ğŸ‡´ Colombia</option>
                            </optgroup>
                            <optgroup label="Oceania">
                                <option value="Australia" {% if country == 'Australia' %}selected{% endif %}>ğŸ‡¦ğŸ‡º Australia</option>
                                <option value="New Zealand" {% if country == 'New Zealand' %}selected{% endif %}>ğŸ‡³ğŸ‡¿ New Zealand</option>
                            </optgroup>
                            <optgroup label="Africa">
                                <option value="South Africa" {% if country == 'South Africa' %}selected{% endif %}>ğŸ‡¿ğŸ‡¦ South Africa</option>
                                <option value="Nigeria" {% if country == 'Nigeria' %}selected{% endif %}>ğŸ‡³ğŸ‡¬ Nigeria</option>
                                <option value="Kenya" {% if country == 'Kenya' %}selected{% endif %}>ğŸ‡°ğŸ‡ª Kenya</option>
                                <option value="Egypt" {% if country == 'Egypt' %}selected{% endif %}>ğŸ‡ªğŸ‡¬ Egypt</option>
                                <option value="Morocco" {% if country == 'Morocco' %}selected{% endif %}>ğŸ‡²ğŸ‡¦ Morocco</option>
                            </optgroup>
                            <option value="Other" {% if is_other_country %}selected{% endif %}>ğŸŒ Other (Please specify)</option>
                        </select>
                    </div>

                    <!-- Other Country Field -->
                    <div id="other_country_field" style="display: {% if is_other_country %}block{% else %}none{% endif %};">
                        <label class="block text-gray-700 font-semibold mb-2">Specify Your Country</label>
                        <input type="text" name="other_country" id="other_country" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="Enter your country name" value="{% if is_other_country %}{{ country }}{% endif %}">
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Language(s) *</label>
                        <select name="language" id="language_select" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" multiple>
                            <optgroup label="Indian Languages">
                                <option value="Hindi" {% if language and 'Hindi' in language %}selected{% endif %}>ğŸ‡®ğŸ‡³ Hindi</option>
                                <option value="English" {% if language and 'English' in language %}selected{% endif %}>ğŸ‡¬ğŸ‡§ English</option>
                                <option value="Tamil" {% if language and 'Tamil' in language %}selected{% endif %}>ğŸ‡®ğŸ‡³ Tamil</option>
                                <option value="Telugu" {% if language and 'Telugu' in language %}selected{% endif %}>ğŸ‡®ğŸ‡³ Telugu</option>
                                <option value="Marathi" {% if language and 'Marathi' in language %}selected{% endif %}>ğŸ‡®ğŸ‡³ Marathi</option>
                                <option value="Bengali" {% if language and 'Bengali' in language %}selected{% endif %}>ğŸ‡®ğŸ‡³ Bengali</option>
                                <option value="Gujarati" {% if language and 'Gujarati' in language %}selected{% endif %}>ğŸ‡®ğŸ‡³ Gujarati</option>
                                <option value="Kannada" {% if language and 'Kannada' in language %}selected{% endif %}>ğŸ‡®ğŸ‡³ Kannada</option>
                                <option value="Malayalam" {% if language and 'Malayalam' in language %}selected{% endif %}>ğŸ‡®ğŸ‡³ Malayalam</option>
                                <option value="Punjabi" {% if language and 'Punjabi' in language %}selected{% endif %}>ğŸ‡®ğŸ‡³ Punjabi</option>
                                <option value="Odia" {% if language and 'Odia' in language %}selected{% endif %}>ğŸ‡®ğŸ‡³ Odia</option>
                                <option value="Urdu" {% if language and 'Urdu' in language %}selected{% endif %}>ğŸ‡®ğŸ‡³ Urdu</option>
                                <option value="Assamese" {% if language and 'Assamese' in language %}selected{% endif %}>ğŸ‡®ğŸ‡³ Assamese</option>
                            </optgroup>
                            <optgroup label="European Languages">
                                <option value="Spanish" {% if language and 'Spanish' in language %}selected{% endif %}>ğŸ‡ªğŸ‡¸ Spanish</option>
                                <option value="French" {% if language and 'French' in language %}selected{% endif %}>ğŸ‡«ğŸ‡· French</option>
                                <option value="German" {% if language and 'German' in language %}selected{% endif %}>ğŸ‡©ğŸ‡ª German</option>
                                <option value="Italian" {% if language and 'Italian' in language %}selected{% endif %}>ğŸ‡®ğŸ‡¹ Italian</option>
                                <option value="Portuguese" {% if language and 'Portuguese' in language %}selected{% endif %}>ğŸ‡µğŸ‡¹ Portuguese</option>
                                <option value="Russian" {% if language and 'Russian' in language %}selected{% endif %}>ğŸ‡·ğŸ‡º Russian</option>
                                <option value="Dutch" {% if language and 'Dutch' in language %}selected{% endif %}>ğŸ‡³ğŸ‡± Dutch</option>
                                <option value="Polish" {% if language and 'Polish' in language %}selected{% endif %}>ğŸ‡µğŸ‡± Polish</option>
                                <option value="Swedish" {% if language and 'Swedish' in language %}selected{% endif %}>ğŸ‡¸ğŸ‡ª Swedish</option>
                                <option value="Greek" {% if language and 'Greek' in language %}selected{% endif %}>ğŸ‡¬ğŸ‡· Greek</option>
                            </optgroup>
                            <optgroup label="Asian Languages">
                                <option value="Chinese (Mandarin)" {% if language and 'Chinese (Mandarin)' in language %}selected{% endif %}>ğŸ‡¨ğŸ‡³ Chinese (Mandarin)</option>
                                <option value="Japanese" {% if language and 'Japanese' in language %}selected{% endif %}>ğŸ‡¯ğŸ‡µ Japanese</option>
                                <option value="Korean" {% if language and 'Korean' in language %}selected{% endif %}>ğŸ‡°ğŸ‡· Korean</option>
                                <option value="Thai" {% if language and 'Thai' in language %}selected{% endif %}>ğŸ‡¹ğŸ‡­ Thai</option>
                                <option value="Vietnamese" {% if language and 'Vietnamese' in language %}selected{% endif %}>ğŸ‡»ğŸ‡³ Vietnamese</option>
                                <option value="Indonesian" {% if language and 'Indonesian' in language %}selected{% endif %}>ğŸ‡®ğŸ‡© Indonesian</option>
                                <option value="Malay" {% if language and 'Malay' in language %}selected{% endif %}>ğŸ‡²ğŸ‡¾ Malay</option>
                            </optgroup>
                            <optgroup label="Middle Eastern Languages">
                                <option value="Arabic" {% if language and 'Arabic' in language %}selected{% endif %}>ğŸ‡¸ğŸ‡¦ Arabic</option>
                                <option value="Persian" {% if language and 'Persian' in language %}selected{% endif %}>ğŸ‡®ğŸ‡· Persian (Farsi)</option>
                                <option value="Turkish" {% if language and 'Turkish' in language %}selected{% endif %}>ğŸ‡¹ğŸ‡· Turkish</option>
                                <option value="Hebrew" {% if language and 'Hebrew' in language %}selected{% endif %}>ğŸ‡®ğŸ‡± Hebrew</option>
                            </optgroup>
                            <optgroup label="African Languages">
                                <option value="Swahili" {% if language and 'Swahili' in language %}selected{% endif %}>ğŸ‡°ğŸ‡ª Swahili</option>
                                <option value="Afrikaans" {% if language and 'Afrikaans' in language %}selected{% endif %}>ğŸ‡¿ğŸ‡¦ Afrikaans</option>
                            </optgroup>
                            <option value="Other">ğŸŒ Other</option>
                        </select>
                        <p class="text-sm text-gray-500 mt-1"><i class="fas fa-mouse-pointer mr-1"></i>Hold Ctrl/Cmd to select multiple languages</p>
                    </div>

                    <!-- Other Language Field -->
                    <div id="other_language_field" style="display: none;">
                        <label class="block text-gray-700 font-semibold mb-2">Specify Other Language(s)</label>
                        <input type="text" name="other_language" id="other_language" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="Enter language(s), separated by commas">
                    </div>
                </div>
                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">City *</label>
                        <input type="text" name="city" value="{{ city }}" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300">
                    </div>

                    <!-- Criminal Certificate Upload (Mandatory for Luxembourg) -->
                    <div id="criminal_certificate_field">
                        <label class="block text-gray-700 font-semibold mb-2">
                            <i class="fas fa-file-pdf text-red-600 mr-2"></i>Criminal Certificate (PDF)
                            <span id="luxembourg_required_badge" class="text-red-600 font-bold" style="display: none;">*</span>
                        </label>
                        <div class="space-y-2">
                            {% if criminal_certificate %}
                            <div class="flex items-center gap-2 p-3 bg-green-50 border-2 border-green-200 rounded-xl">
                                <i class="fas fa-check-circle text-green-600"></i>
                                <span class="text-sm text-green-700">Current file: {{ criminal_certificate }}</span>
                                <a href="{{ url_for('static', filename='uploads/' + criminal_certificate) }}" target="_blank" class="ml-auto text-blue-600 hover:text-blue-800">
                                    <i class="fas fa-external-link-alt"></i> View
                                </a>
                            </div>
                            {% endif %}
                            <label class="block">
                                <div class="flex items-center justify-center w-full p-4 border-2 border-dashed border-gray-300 rounded-xl hover:border-blue-500 cursor-pointer transition duration-300 bg-gray-50 hover:bg-blue-50">
                                    <div class="text-center">
                                        <i class="fas fa-cloud-upload-alt text-3xl text-gray-400 mb-2"></i>
                                        <p class="text-sm text-gray-600">
                                            <span class="font-semibold text-blue-600">Click to upload</span> or drag and drop
                                        </p>
                                        <p class="text-xs text-gray-500 mt-1">PDF only (Max 10MB)</p>
                                    </div>
                                    <input type="file" name="criminal_certificate" id="criminal_certificate_input" class="hidden" accept=".pdf" onchange="previewPDF(this)">
                                </div>
                            </label>
                            <div id="pdf_preview" class="hidden p-3 bg-blue-50 border-2 border-blue-200 rounded-xl">
                                <div class="flex items-center gap-2">
                                    <i class="fas fa-file-pdf text-red-600 text-2xl"></i>
                                    <div class="flex-1">
                                        <p class="text-sm font-semibold text-gray-800" id="pdf_filename"></p>
                                        <p class="text-xs text-gray-600" id="pdf_filesize"></p>
                                    </div>
                                    <button type="button" onclick="clearPDF()" class="text-red-600 hover:text-red-800">
                                        <i class="fas fa-times-circle"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <p class="text-xs text-gray-500 mt-2">
                            <i class="fas fa-info-circle mr-1"></i>
                            <span id="luxembourg_message" style="display: none;" class="text-red-600 font-semibold">Required for mentors in Luxembourg</span>
                            <span id="optional_message">Optional for all other countries</span>
                        </p>
                    </div>


                </div>
            </div>
        </div>

        <!-- Educational Information -->
        <div class="bg-white p-8 rounded-2xl shadow-lg border border-blue-100">
            <h3 class="text-3xl font-bold text-gray-800 mb-6 pb-3 border-b-2 border-blue-100">
                <i class="fas fa-graduation-cap text-indigo-500 mr-3"></i>Educational Information
            </h3>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Highest Qualification</label>
                        <select name="highest_qualification" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300">
                            <option value="">Select Qualification</option>
                            <option value="Bachelor's" {% if highest_qualification == "Bachelor's" %}selected{% endif %}>Bachelor's Degree</option>
                            <option value="Master's" {% if highest_qualification == "Master's" %}selected{% endif %}>Master's Degree</option>
                            <option value="PhD" {% if highest_qualification == "PhD" %}selected{% endif %}>PhD / Doctorate</option>
                            <option value="Postdoctoral" {% if highest_qualification == "Postdoctoral" %}selected{% endif %}>Postdoctoral</option>
                            <option value="Professional Certification" {% if highest_qualification == "Professional Certification" %}selected{% endif %}>Professional Certification</option>
                            <option value="Diploma" {% if highest_qualification == "Diploma" %}selected{% endif %}>Diploma</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Degree Name</label>
                        <input type="text" name="degree_name" value="{{ degree_name or '' }}" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="e.g., B.Tech, MBA, M.Sc, PhD">
                        <p class="text-sm text-gray-500 mt-1"><i class="fas fa-info-circle mr-1"></i>Enter the specific degree name</p>
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Field of Study / Specialization</label>
                        <input type="text" name="field_of_study" value="{{ field_of_study or '' }}" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="e.g., Computer Science, Mechanical Engineering, Business Administration">
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">University / Collage Name</label>
                        <input type="text" name="university_name" value="{{ university_name or '' }}" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="e.g., IIT Delhi, Stanford University, Oxford University">
                    </div>
                </div>

                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Year of Graduation</label>
                        <input type="number" name="graduation_year" value="{{ graduation_year or '' }}" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="e.g., 2020" min="1950" max="2099">
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Academic Status</label>
                        <select name="academic_status" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300">
                            <option value="">Select Status</option>
                            <option value="Completed" {% if academic_status == "Completed" %}selected{% endif %}>âœ… Completed</option>
                            <option value="Pursuing" {% if academic_status == "Pursuing" %}selected{% endif %}>ğŸ“š Pursuing</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Certifications or Professional Courses</label>
                        <textarea name="certifications" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" rows="3" placeholder="e.g., AWS Certified Solutions Architect, Google Cloud Professional, PMP, etc.">{{ certifications or '' }}</textarea>
                        <p class="text-sm text-gray-500 mt-1"><i class="fas fa-info-circle mr-1"></i>Separate multiple certifications with commas or line breaks</p>
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Research Work or Thesis Title (Optional)</label>
                        <textarea name="research_work" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" rows="3" placeholder="e.g., 'Machine Learning Applications in Healthcare' or 'Quantum Computing Algorithms'">{{ research_work or '' }}</textarea>
                        <p class="text-sm text-gray-500 mt-1"><i class="fas fa-info-circle mr-1"></i>Share your research work or thesis title if applicable</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Social Links -->
        <div class="bg-white p-8 rounded-2xl shadow-lg border border-blue-100">
            <h3 class="text-3xl font-bold text-gray-800 mb-6 pb-3 border-b-2 border-blue-100">
                <i class="fas fa-share-alt text-purple-500 mr-3"></i>Social Links
            </h3>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">
                            <i class="fab fa-linkedin text-blue-600 mr-2"></i>LinkedIn Profile
                        </label>
                        <input type="url" name="linkedin_link" value="{{ linkedin_link }}" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="https://linkedin.com/in/yourprofile">
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">
                            <i class="fab fa-github text-gray-800 mr-2"></i>GitHub Profile
                        </label>
                        <input type="url" name="github_link" value="{{ github_link }}" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="https://github.com/yourusername">
                    </div>
                </div>
                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">
                            <i class="fas fa-globe text-green-600 mr-2"></i>Portfolio Website
                        </label>
                        <input type="url" name="portfolio_link" value="{{ portfolio_link }}" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="https://yourportfolio.com">
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">
                            <i class="fas fa-link text-gray-600 mr-2"></i>Other Social Link
                        </label>
                        <input type="url" name="other_social_link" value="{{ other_social_link }}" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="https://">
                    </div>
                </div>
            </div>
        </div>

        <!-- Mentorship Preferences -->
        <div class="bg-white p-8 rounded-2xl shadow-lg border border-blue-100">
            <h3 class="text-3xl font-bold text-gray-800 mb-6 pb-3 border-b-2 border-blue-100">
                <i class="fas fa-hands-helping text-yellow-500 mr-3"></i>Mentorship Preferences
            </h3>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Mentorship Topics *</label>
                        <select name="mentorship_topics" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" multiple>
                            <optgroup label="Career Development">
                                <option value="Career Guidance" {% if mentorship_topics and 'Career Guidance' in mentorship_topics %}selected{% endif %}>ğŸ¯ Career Guidance</option>
                                <option value="Career Transition" {% if mentorship_topics and 'Career Transition' in mentorship_topics %}selected{% endif %}>ğŸ”„ Career Transition</option>
                                <option value="Interview Preparation" {% if mentorship_topics and 'Interview Preparation' in mentorship_topics %}selected{% endif %}>ğŸ“ Interview Preparation</option>
                                <option value="Resume Building" {% if mentorship_topics and 'Resume Building' in mentorship_topics %}selected{% endif %}>ğŸ“„ Resume Building</option>
                                <option value="Job Search Strategy" {% if mentorship_topics and 'Job Search Strategy' in mentorship_topics %}selected{% endif %}>ğŸ” Job Search Strategy</option>
                                <option value="Salary Negotiation" {% if mentorship_topics and 'Salary Negotiation' in mentorship_topics %}selected{% endif %}>ğŸ’° Salary Negotiation</option>
                            </optgroup>
                            <optgroup label="Technical Skills">
                                <option value="Programming" {% if mentorship_topics and 'Programming' in mentorship_topics %}selected{% endif %}>ğŸ’» Programming</option>
                                <option value="Data Science" {% if mentorship_topics and 'Data Science' in mentorship_topics %}selected{% endif %}>ğŸ“Š Data Science</option>
                                <option value="Machine Learning" {% if mentorship_topics and 'Machine Learning' in mentorship_topics %}selected{% endif %}>ğŸ¤– Machine Learning</option>
                                <option value="Web Development" {% if mentorship_topics and 'Web Development' in mentorship_topics %}selected{% endif %}>ğŸŒ Web Development</option>
                                <option value="Mobile Development" {% if mentorship_topics and 'Mobile Development' in mentorship_topics %}selected{% endif %}>ğŸ“± Mobile Development</option>
                                <option value="Cloud Computing" {% if 'Cloud Computing' in mentorship_topics %}selected{% endif %}>â˜ï¸ Cloud Computing</option>
                                <option value="Cybersecurity" {% if 'Cybersecurity' in mentorship_topics %}selected{% endif %}>ğŸ”’ Cybersecurity</option>
                            </optgroup>
                            <optgroup label="Professional Skills">
                                <option value="Leadership" {% if 'Leadership' in mentorship_topics %}selected{% endif %}>ğŸŒŸ Leadership</option>
                                <option value="Project Management" {% if 'Project Management' in mentorship_topics %}selected{% endif %}>ğŸ“Š Project Management</option>
                                <option value="Public Speaking" {% if 'Public Speaking' in mentorship_topics %}selected{% endif %}>ğŸ¤ Public Speaking</option>
                                <option value="Communication Skills" {% if 'Communication Skills' in mentorship_topics %}selected{% endif %}>ğŸ’¬ Communication Skills</option>
                                <option value="Time Management" {% if 'Time Management' in mentorship_topics %}selected{% endif %}>â° Time Management</option>
                                <option value="Team Collaboration" {% if 'Team Collaboration' in mentorship_topics %}selected{% endif %}>ğŸ‘¥ Team Collaboration</option>
                            </optgroup>
                            <optgroup label="Academic & Research">
                                <option value="Research Methodology" {% if 'Research Methodology' in mentorship_topics %}selected{% endif %}>ğŸ”¬ Research Methodology</option>
                                <option value="Academic Writing" {% if 'Academic Writing' in mentorship_topics %}selected{% endif %}>âœï¸ Academic Writing</option>
                                <option value="Thesis Guidance" {% if 'Thesis Guidance' in mentorship_topics %}selected{% endif %}>ğŸ“š Thesis Guidance</option>
                                <option value="Study Abroad" {% if 'Study Abroad' in mentorship_topics %}selected{% endif %}>âœˆï¸ Study Abroad</option>
                                <option value="Competitive Exams" {% if 'Competitive Exams' in mentorship_topics %}selected{% endif %}>ğŸ“ Competitive Exams</option>
                            </optgroup>
                            <optgroup label="Entrepreneurship">
                                <option value="Startup Guidance" {% if 'Startup Guidance' in mentorship_topics %}selected{% endif %}>ğŸš€ Startup Guidance</option>
                                <option value="Business Planning" {% if 'Business Planning' in mentorship_topics %}selected{% endif %}>ğŸ“ˆ Business Planning</option>
                                <option value="Funding & Investment" {% if 'Funding & Investment' in mentorship_topics %}selected{% endif %}>ğŸ’¸ Funding & Investment</option>
                                <option value="Marketing Strategy" {% if 'Marketing Strategy' in mentorship_topics %}selected{% endif %}>ğŸ“¢ Marketing Strategy</option>
                                <option value="Product Management" {% if 'Product Management' in mentorship_topics %}selected{% endif %}>ğŸ“¦ Product Management</option>
                            </optgroup>
                            <optgroup label="Personal Development">
                                <option value="Personal Growth" {% if 'Personal Growth' in mentorship_topics %}selected{% endif %}>ğŸŒ± Personal Growth</option>
                                <option value="Mindset & Motivation" {% if 'Mindset & Motivation' in mentorship_topics %}selected{% endif %}>ğŸ’ª Mindset & Motivation</option>
                                <option value="Work-Life Balance" {% if 'Work-Life Balance' in mentorship_topics %}selected{% endif %}>âš–ï¸ Work-Life Balance</option>
                                <option value="Networking Skills" {% if 'Networking Skills' in mentorship_topics %}selected{% endif %}>ğŸ¤ Networking Skills</option>
                                <option value="Personal Branding" {% if 'Personal Branding' in mentorship_topics %}selected{% endif %}>ğŸŒŸ Personal Branding</option>
                            </optgroup>
                        </select>
                        <p class="text-sm text-gray-500 mt-1"><i class="fas fa-mouse-pointer mr-1"></i>Hold Ctrl/Cmd to select multiple topics</p>
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Mentorship Type Preference *</label>
                        <select name="mentorship_type_preference" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" multiple>
                            <optgroup label="Student Groups">
                                <option value="School Students" {% if mentorship_type_preference and 'School Students' in mentorship_type_preference %}selected{% endif %}>ğŸ’ School Students (6th-12th)</option>
                                <option value="College Students" {% if mentorship_type_preference and 'College Students' in mentorship_type_preference %}selected{% endif %}>ğŸ“ College Students (Undergraduate)</option>
                                <option value="Graduate Students" {% if mentorship_type_preference and 'Graduate Students' in mentorship_type_preference %}selected{% endif %}>ğŸ“ Graduate Students (Postgraduate)</option>
                                <option value="PhD Scholars" {% if mentorship_type_preference and 'PhD Scholars' in mentorship_type_preference %}selected{% endif %}>ğŸ”¬ PhD Scholars</option>
                            </optgroup>
                            <optgroup label="Professional Groups">
                                <option value="Early Professionals" {% if mentorship_type_preference and 'Early Professionals' in mentorship_type_preference %}selected{% endif %}>ğŸ‘¨â€ğŸ’¼ Early Professionals (0-3 years)</option>
                                <option value="Mid-Level Professionals" {% if mentorship_type_preference and 'Mid-Level Professionals' in mentorship_type_preference %}selected{% endif %}>ğŸ’¼ Mid-Level Professionals (4-8 years)</option>
                                <option value="Senior Professionals" {% if mentorship_type_preference and 'Senior Professionals' in mentorship_type_preference %}selected{% endif %}>ğŸ‘” Senior Professionals (8+ years)</option>
                                <option value="Career Changers" {% if mentorship_type_preference and 'Career Changers' in mentorship_type_preference %}selected{% endif %}>ğŸ”„ Career Changers</option>
                            </optgroup>
                            <optgroup label="Special Groups">
                                <option value="Women" {% if mentorship_type_preference and 'Women' in mentorship_type_preference %}selected{% endif %}>ğŸ‘©â€ğŸ’¼ Women Professionals</option>
                                <option value="Underrepresented Groups" {% if mentorship_type_preference and 'Underrepresented Groups' in mentorship_type_preference %}selected{% endif %}>ğŸŒˆ Underrepresented Groups</option>
                                <option value="Entrepreneurs" {% if mentorship_type_preference and 'Entrepreneurs' in mentorship_type_preference %}selected{% endif %}>ğŸ’¡ Entrepreneurs</option>
                                <option value="Returning Professionals" {% if mentorship_type_preference and 'Returning Professionals' in mentorship_type_preference %}selected{% endif %}>â†©ï¸ Returning Professionals</option>
                                <option value="First Generation Students" {% if mentorship_type_preference and 'First Generation Students' in mentorship_type_preference %}selected{% endif %}>ğŸŒŸ First Generation Students</option>
                            </optgroup>
                            <option value="All" {% if mentorship_type_preference and 'All' in mentorship_type_preference %}selected{% endif %}>ğŸŒ All Groups</option>
                        </select>
                        <p class="text-sm text-gray-500 mt-1"><i class="fas fa-mouse-pointer mr-1"></i>Hold Ctrl/Cmd to select multiple preferences</p>
                    </div>
                </div>
                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Preferred Communication *</label>
                        <select name="preferred_communication" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300">
                            <option value="">Select Preference</option>
                            <option value="Online" {% if preferred_communication == 'Online' %}selected{% endif %}>ğŸ’» Online Only</option>
                            <option value="Offline" {% if preferred_communication == 'Offline' %}selected{% endif %}>ğŸ¢ Offline Only</option>
                            <option value="Hybrid" {% if preferred_communication == 'Hybrid' %}selected{% endif %}>ğŸ”€ Hybrid (Online & Offline)</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Availability *</label>
                        <select name="availability" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300">
                            <option value="">Select Availability</option>
                            <option value="Weekdays" {% if availability == 'Weekdays' %}selected{% endif %}>ğŸ“… Weekdays</option>
                            <option value="Weekends" {% if availability == 'Weekends' %}selected{% endif %}>ğŸ–ï¸ Weekends</option>
                            <option value="Evenings" {% if availability == 'Evenings' %}selected{% endif %}>ğŸŒ™ Evenings</option>
                            <option value="Flexible" {% if availability == 'Flexible' %}selected{% endif %}>ğŸ”„ Flexible</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Connect Frequency *</label>
                        <select name="connect_frequency" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300">
                            <option value="">Select Frequency</option>
                            <option value="Weekly" {% if connect_frequency == 'Weekly' %}selected{% endif %}>ğŸ“… Weekly</option>
                            <option value="Bi-weekly" {% if connect_frequency == 'Bi-weekly' %}selected{% endif %}>ğŸ”„ Bi-weekly</option>
                            <option value="Monthly" {% if connect_frequency == 'Monthly' %}selected{% endif %}>ğŸ—“ï¸ Monthly</option>
                            <option value="As needed" {% if connect_frequency == 'As needed' %}selected{% endif %}>ğŸ’¬ As needed</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Preferred Duration *</label>
                        <select name="preferred_duration" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300">
                            <option value="">Select Duration</option>
                            <option value="1 month" {% if preferred_duration == '1 month' %}selected{% endif %}>1 month</option>
                            <option value="3 months" {% if preferred_duration == '3 months' %}selected{% endif %}>3 months</option>
                            <option value="6 months" {% if preferred_duration == '6 months' %}selected{% endif %}>6 months</option>
                            <option value="1 year" {% if preferred_duration == '1 year' %}selected{% endif %}>1 year</option>
                            <option value="Flexible" {% if preferred_duration == 'Flexible' %}selected{% endif %}>Flexible</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mentor Philosophy -->
        <div class="bg-white p-8 rounded-2xl shadow-lg border border-blue-100">
            <h3 class="text-3xl font-bold text-gray-800 mb-6 pb-3 border-b-2 border-blue-100">
                <i class="fas fa-lightbulb text-yellow-500 mr-3"></i>Mentor Philosophy
            </h3>
            <div class="space-y-4">
                <div>
                    <label class="block text-gray-700 font-semibold mb-2">Why Mentor? *</label>
                    <textarea name="why_mentor" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" rows="3" placeholder="Share your motivation for becoming a mentor...">{{ why_mentor }}</textarea>
                </div>
                <div>
                    <label class="block text-gray-700 font-semibold mb-2">Mentorship Philosophy *</label>
                    <textarea name="mentorship_philosophy" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" rows="3" placeholder="Describe your approach to mentorship...">{{ mentorship_philosophy }}</textarea>
                </div>
                <div>
                    <label class="block text-gray-700 font-semibold mb-2">Mentorship Motto *</label>
                    <input type="text" name="mentorship_motto" value="{{ mentorship_motto }}" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="e.g., 'Empower through guidance and support'">
                </div>
            </div>
        </div>

        <!-- Additional Information -->
        <div class="bg-white p-8 rounded-2xl shadow-lg border border-blue-100">
            <h3 class="text-3xl font-bold text-gray-800 mb-6 pb-3 border-b-2 border-blue-100">
                <i class="fas fa-info-circle text-blue-500 mr-3"></i>Additional Information
            </h3>
            <textarea name="additional_info" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" rows="4" placeholder="Any other information you'd like to share with potential mentees...">{{ additional_info }}</textarea>
        </div>

        <!-- Submit Button -->
        <div class="text-center pt-6">
            <button type="submit" class="px-12 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-2xl shadow-2xl hover:from-blue-700 hover:to-purple-700 transform hover:scale-105 transition duration-300 font-bold text-lg">
                <i class="fas fa-save mr-2"></i>Save Profile Changes
            </button>
        </div>
    </form>
</div>


<script>
// Datalist for country codes
const countryCodesDatalist = `
<datalist id="country_codes">
    <option value="+91">India</option>
    <option value="+1">USA/Canada</option>
    <option value="+44">UK</option>
    <option value="+971">UAE</option>
    <option value="+966">Saudi Arabia</option>
    <option value="+65">Singapore</option>
    <option value="+61">Australia</option>
    <option value="+49">Germany</option>
    <option value="+33">France</option>
    <option value="+81">Japan</option>
    <option value="+86">China</option>
    <option value="+92">Pakistan</option>
    <option value="+880">Bangladesh</option>
    <option value="+977">Nepal</option>
    <option value="+94">Sri Lanka</option>
    <option value="+60">Malaysia</option>
    <option value="+63">Philippines</option>
    <option value="+82">South Korea</option>
    <option value="+39">Italy</option>
    <option value="+34">Spain</option>
    <option value="+7">Russia</option>
    <option value="+55">Brazil</option>
    <option value="+52">Mexico</option>
    <option value="+27">South Africa</option>
    <option value="+20">Egypt</option>
    <option value="+234">Nigeria</option>
    <option value="+254">Kenya</option>
    <option value="+974">Qatar</option>
    <option value="+965">Kuwait</option>
    <option value="+968">Oman</option>
    <option value="+973">Bahrain</option>
    <option value="+64">New Zealand</option>
    <option value="+31">Netherlands</option>
    <option value="+41">Switzerland</option>
    <option value="+46">Sweden</option>
    <option value="+47">Norway</option>
    <option value="+45">Denmark</option>
    <option value="+48">Poland</option>
    <option value="+353">Ireland</option>
    <option value="+352">Luxembourg</option>
    <option value="+32">Belgium</option>
    <option value="+43">Austria</option>
    <option value="+358">Finland</option>
    <option value="+351">Portugal</option>
    <option value="+30">Greece</option>
    <option value="+420">Czech Republic</option>
    <option value="+36">Hungary</option>
    <option value="+380">Ukraine</option>
    <option value="+90">Turkey</option>
    <option value="+972">Israel</option>
</datalist>`;
document.body.insertAdjacentHTML('beforeend', countryCodesDatalist);

    function previewImage(input) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = input.closest('.text-center').querySelector('img');
                if (img) {
                    img.src = e.target.result;
                } else {
                    const div = input.closest('.text-center').querySelector('div');
                    div.innerHTML = `<img src="${e.target.result}" class="w-32 h-32 md:w-40 md:h-40 object-cover rounded-full shadow-lg border-4 border-blue-200">`;
                }
            }
            reader.readAsDataURL(input.files[0]);
        }
    }


document.addEventListener('DOMContentLoaded', function() {
    // Institution dropdown handler
    const institutionSelect = document.getElementById('institution');
    const otherInstitutionField = document.getElementById('other_institution_field');
    
    if (institutionSelect) {
        institutionSelect.addEventListener('change', function() {
            if (this.value === 'Other') {
                otherInstitutionField.style.display = 'block';
                document.getElementById('other_institution_name').required = true;
            } else {
                otherInstitutionField.style.display = 'none';
                document.getElementById('other_institution_name').required = false;
            }
        });
    }

    // Profession dropdown handler
    const professionSelect = document.getElementById('profession_select');
    const otherProfessionField = document.getElementById('other_profession_field');
    
    if (professionSelect) {
        professionSelect.addEventListener('change', function() {
            if (this.value === 'Other') {
                otherProfessionField.style.display = 'block';
                document.getElementById('other_profession').required = true;
            } else {
                otherProfessionField.style.display = 'none';
                document.getElementById('other_profession').required = false;
            }
        });
    }

    // Industry/Sector dropdown handler
    const industrySectorSelect = document.getElementById('industry_sector_select');
    const otherIndustrySectorField = document.getElementById('other_industry_sector_field');
    
    if (industrySectorSelect) {
        industrySectorSelect.addEventListener('change', function() {
            if (this.value === 'Other') {
                otherIndustrySectorField.style.display = 'block';
                document.getElementById('other_industry_sector').required = true;
            } else {
                otherIndustrySectorField.style.display = 'none';
                document.getElementById('other_industry_sector').required = false;
            }
        });
    }

    // Country dropdown handler
    const countrySelect = document.getElementById('country_select');
    const otherCountryField = document.getElementById('other_country_field');
    
    if (countrySelect) {
        countrySelect.addEventListener('change', function() {
            if (this.value === 'Other') {
                otherCountryField.style.display = 'block';
                document.getElementById('other_country').required = true;
            } else {
                otherCountryField.style.display = 'none';
                document.getElementById('other_country').required = false;
            }
        });
    }

    // Education dropdown handler
    const educationSelect = document.getElementById('education_select');
    const otherEducationField = document.getElementById('other_education_field');
    
    if (educationSelect) {
        educationSelect.addEventListener('change', function() {
            if (this.value === 'Other') {
                otherEducationField.style.display = 'block';
                document.getElementById('other_education').required = true;
            } else {
                otherEducationField.style.display = 'none';
                document.getElementById('other_education').required = false;
            }
        });
    }

    // Language dropdown handler (for multi-select)
    const languageSelect = document.getElementById('language_select');
    const otherLanguageField = document.getElementById('other_language_field');
    
    if (languageSelect) {
        languageSelect.addEventListener('change', function() {
            const selectedOptions = Array.from(this.selectedOptions).map(opt => opt.value);
            if (selectedOptions.includes('Other')) {
                otherLanguageField.style.display = 'block';
            } else {
                otherLanguageField.style.display = 'none';
            }
        });
    }
});

// Form validation function
function validateForm() {
    const form = document.getElementById('mentorProfileForm');
    if (!form) {
        console.error('Form not found');
        return false;
    }
    
    const requiredFields = [
        { name: 'profession', label: 'Profession' },
        { name: 'skills', label: 'Skills' },
        { name: 'role', label: 'Role' },
        { name: 'industry_sector', label: 'Industry Sector' },
        { name: 'organisation', label: 'Organisation' },
        { name: 'years_of_experience', label: 'Years of Experience' },
        { name: 'whatsapp', label: 'WhatsApp Number' },
        { name: 'city', label: 'City' },
        { name: 'country', label: 'Country' },
        { name: 'education', label: 'Education' },
        { name: 'language', label: 'Language' },
        { name: 'linkedin_link', label: 'LinkedIn Link' },
        { name: 'mentorship_topics', label: 'Mentorship Topics' },
        { name: 'mentorship_type_preference', label: 'Mentorship Type Preference' },
        { name: 'preferred_communication', label: 'Preferred Communication' },
        { name: 'availability', label: 'Availability' },
        { name: 'connect_frequency', label: 'Connect Frequency' },
        { name: 'preferred_duration', label: 'Preferred Duration' },
        { name: 'why_mentor', label: 'Why Mentor' },
        { name: 'mentorship_philosophy', label: 'Mentorship Philosophy' },
        { name: 'mentorship_motto', label: 'Mentorship Motto' }
    ];

    let emptyFields = [];

    requiredFields.forEach(field => {
        const element = form.elements[field.name];
        if (!element) {
            console.warn(`Field not found: ${field.name}`);
            return;
        }

        let isEmpty = false;

        if (element.type === 'select-multiple') {
            // For multi-select, check if at least one option is selected
            isEmpty = element.selectedOptions.length === 0;
        } else if (element.tagName === 'TEXTAREA') {
            isEmpty = !element.value.trim();
        } else if (element.type === 'text' || element.type === 'email' || element.type === 'number' || element.type === 'url') {
            isEmpty = !element.value.trim();
        } else if (element.type === 'select-one') {
            isEmpty = !element.value || element.value === '';
        }

        if (isEmpty) {
            emptyFields.push(field.label);
            element.style.borderColor = '#ef4444';
            element.style.borderWidth = '2px';
        } else {
            element.style.borderColor = '';
            element.style.borderWidth = '';
        }
    });

    if (emptyFields.length > 0) {
        alert('âŒ Please fill all mandatory fields:\n\n' + emptyFields.join('\n'));
        return false;
    }

    return true;
}

// Clear error styling when user starts typing
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('mentorProfileForm');
    if (form) {
        const inputs = form.querySelectorAll('input, select, textarea');
        inputs.forEach(input => {
            input.addEventListener('change', function() {
                this.style.borderColor = '';
                this.style.borderWidth = '';
            });
            input.addEventListener('input', function() {
                this.style.borderColor = '';
                this.style.borderWidth = '';
            });
        });
    } else {
        console.error('mentorProfileForm not found in DOM');
    }
    
    // Handle Luxembourg criminal certificate requirement
    updateCriminalCertificateRequirement();
});

// PDF preview function
function previewPDF(input) {
    const file = input.files[0];
    if (file) {
        // Check if file is PDF
        if (!file.name.toLowerCase().endsWith('.pdf')) {
            alert('Please upload a PDF file only');
            input.value = '';
            return;
        }
        
        // Check file size (max 10MB)
        const maxSize = 10 * 1024 * 1024; // 10MB in bytes
        if (file.size > maxSize) {
            alert('File size must be less than 10MB');
            input.value = '';
            return;
        }
        
        // Show preview
        document.getElementById('pdf_preview').classList.remove('hidden');
        document.getElementById('pdf_filename').textContent = file.name;
        document.getElementById('pdf_filesize').textContent = formatFileSize(file.size);
    }
}

// Clear PDF selection
function clearPDF() {
    document.getElementById('criminal_certificate_input').value = '';
    document.getElementById('pdf_preview').classList.add('hidden');
}

// Format file size
function formatFileSize(bytes) {
    if (bytes === 0) return '0 Bytes';
    const k = 1024;
    const sizes = ['Bytes', 'KB', 'MB'];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];
}

// Update criminal certificate requirement based on country selection
function updateCriminalCertificateRequirement() {
    const countrySelect = document.getElementById('country_select');
    const otherCountryInput = document.getElementById('other_country');
    const luxembourgBadge = document.getElementById('luxembourg_required_badge');
    const luxembourgMessage = document.getElementById('luxembourg_message');
    const optionalMessage = document.getElementById('optional_message');
    const certificateField = document.getElementById('criminal_certificate_field');
    
    function checkLuxembourg() {
        const selectedCountry = countrySelect.value;
        const otherCountry = otherCountryInput ? otherCountryInput.value : '';
        
        const isLuxembourg = selectedCountry === 'Luxembourg' || 
                            (selectedCountry === 'Other' && otherCountry.toLowerCase() === 'luxembourg');
        
        if (isLuxembourg) {
            // Show required indicator
            luxembourgBadge.style.display = 'inline';
            luxembourgMessage.style.display = 'inline';
            optionalMessage.style.display = 'none';
            certificateField.classList.add('border-2', 'border-red-200', 'p-4', 'rounded-xl', 'bg-red-50');
        } else {
            // Show optional indicator
            luxembourgBadge.style.display = 'none';
            luxembourgMessage.style.display = 'none';
            optionalMessage.style.display = 'inline';
            certificateField.classList.remove('border-2', 'border-red-200', 'p-4', 'rounded-xl', 'bg-red-50');
        }
    }
    
    // Check on page load
    checkLuxembourg();
    
    // Check when country changes
    if (countrySelect) {
        countrySelect.addEventListener('change', checkLuxembourg);
    }
    
    // Check when other country input changes
    if (otherCountryInput) {
        otherCountryInput.addEventListener('input', checkLuxembourg);
    }
}

</script>
{% endblock %}