{% extends "base2.html" %}
{% block title %}Edit Mentor Profile{% endblock %}

{% block user %}Edit Mentor Profile{% endblock %}

{% block Sidebar %}
    <a href="{{ url_for('profile')}}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition duration-150 ease-in-out">ğŸ‘¤ My Profile</a>
    <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition duration-150 ease-in-out">âš™ï¸ Settings</a>
    <a href="{{ url_for('logout')}}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition duration-150 ease-in-out">ğŸšª Sign out</a>
{% endblock %}

{% block content %}

<style>
    select[multiple] {
        height: auto;
        min-height: 120px;
        background-image: none;
        padding-right: 0.75rem;
    }
    
    select:focus {
        outline: none;
        border-color: #3b82f6;
        box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
    }
    
    .transition {
        transition: all 0.3s ease;
    }
    
    .shadow-2xl {
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    }
    
    optgroup {
        font-weight: bold;
        color: #4b5563;
    }
    
    optgroup option {
        font-weight: normal;
        padding-left: 1rem;
    }


    /* Language dropdown styling */
#language_dropdown_menu {
    scrollbar-width: thin;
    scrollbar-color: #cbd5e0 #f7fafc;
}

#language_dropdown_menu::-webkit-scrollbar {
    width: 8px;
}

#language_dropdown_menu::-webkit-scrollbar-track {
    background: #f7fafc;
    border-radius: 10px;
}

#language_dropdown_menu::-webkit-scrollbar-thumb {
    background: #cbd5e0;
    border-radius: 10px;
}

#language_dropdown_menu::-webkit-scrollbar-thumb:hover {
    background: #a0aec0;
}

.remove-language-btn {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1.2rem;
    line-height: 1;
    padding: 0;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
}

.remove-language-btn:hover {
    background-color: rgba(59, 130, 246, 0.1);
}

</style>

<div class="max-w-6xl mx-auto mt-8 p-6 bg-gradient-to-br from-gray-50 to-blue-50 rounded-2xl shadow-2xl">
    <form id="mentorProfileForm" action="{{ url_for('editmentorprofile') }}" method="POST" enctype="multipart/form-data" class="space-y-8" onsubmit="return validateForm()">
        <!-- Profile Header -->
        <div class="flex flex-col items-center md:flex-row md:items-center md:justify-start space-y-6 md:space-y-0 md:space-x-8 mb-8 p-6 bg-white rounded-xl shadow-md">
            <!-- Profile Picture Upload -->
            <div class="text-center">
                <div class="relative inline-block">
                    {% if profile_picture %}
                    <img src="{{ url_for('static', filename='uploads/' + profile_picture) }}" 
                         alt="Profile Picture" 
                         class="w-32 h-32 md:w-40 md:h-40 object-cover rounded-full shadow-lg border-4 border-blue-200 hover:border-blue-400 transition duration-300">
                    {% else %}
                    <div class="w-32 h-32 md:w-40 md:h-40 flex items-center justify-center bg-gradient-to-br from-blue-100 to-purple-100 text-blue-600 rounded-full text-lg font-semibold shadow-lg border-4 border-blue-200">
                        <i class="fas fa-user text-4xl"></i>
                    </div>
                    {% endif %}
                    <div class="absolute bottom-2 right-2 bg-blue-500 text-white p-2 rounded-full shadow-lg">
                        <i class="fas fa-camera text-sm"></i>
                    </div>
                </div>
                <div class="mt-4">
                    <label class="bg-blue-500 text-white px-4 py-2 rounded-lg cursor-pointer hover:bg-blue-600 transition duration-300 inline-block">
                        <i class="fas fa-upload mr-2"></i>Upload Photo
                        {% if profile_picture %}
                        <input type="file" name="profile_picture" class="hidden" onchange="previewImage(this)" accept="image/*">
                        {% else %}
                        <input type="file" name="profile_picture" class="hidden" onchange="previewImage(this)" required accept="image/*">
                        {% endif %}
                    </label>
                </div>
                {% if profile_picture %}
                <p class="text-xs text-gray-500 mt-2">Leave empty to keep current picture</p>
                {% else %}
                <p class="text-xs text-red-500 mt-2">* Profile picture is required</p>
                {% endif %}
            </div>

            <!-- Basic Information -->
            <div class="text-center md:text-left w-full space-y-4">
                <div>
                    <label class="block text-gray-700 font-bold text-lg mb-2">Full Name</label>
                    <input type="text" name="full_name" value="{{ full_name }}" class="w-full p-3 border-2 border-gray-200 rounded-xl bg-gray-50 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" readonly>
                </div>
                <div>
                    <label class="block text-gray-700 font-bold text-lg mb-2">Email</label>
                    <input type="email" name="email" value="{{ email }}" class="w-full p-3 border-2 border-gray-200 rounded-xl bg-gray-50 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" readonly>
                </div>
            </div>
        </div>

        <!-- Professional Information -->
        <div class="bg-white p-8 rounded-2xl shadow-lg border border-blue-100">
            <h3 class="text-3xl font-bold text-gray-800 mb-6 pb-3 border-b-2 border-blue-100">
                <i class="fas fa-briefcase text-blue-500 mr-3"></i>Professional Information
            </h3>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="space-y-4">
                    {% set profession_options = ['Software Engineer', 'Data Scientist', 'AI/ML Engineer', 'Web Developer', 'DevOps Engineer', 'Cybersecurity Analyst', 'Doctor', 'Surgeon', 'Dentist', 'Pharmacist', 'Medical Researcher', 'Business Consultant', 'Product Manager', 'Marketing Manager', 'Financial Analyst', 'Entrepreneur', 'Professor', 'Teacher', 'Education Consultant', 'Researcher'] %}
                    {% set is_other_profession = profession and profession not in profession_options %}
                        <div>
                            <label class="block text-gray-700 font-semibold mb-2">Profession *</label>
                            <select name="profession" id="profession_select" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300">
                                <option value="">Select Your Profession</option>
                                <optgroup label="Technology">
                                    <option value="Software Engineer" {% if profession == 'Software Engineer' %}selected{% endif %}>Software Engineer/Developer</option>
                                    <option value="Data Scientist" {% if profession == 'Data Scientist' %}selected{% endif %}>Data Scientist/Analyst</option>
                                    <option value="AI/ML Engineer" {% if profession == 'AI/ML Engineer' %}selected{% endif %}>AI/ML Engineer</option>
                                    <option value="Web Developer" {% if profession == 'Web Developer' %}selected{% endif %}>Web Developer</option>
                                    <option value="DevOps Engineer" {% if profession == 'DevOps Engineer' %}selected{% endif %}>DevOps Engineer</option>
                                    <option value="Cybersecurity Analyst" {% if profession == 'Cybersecurity Analyst' %}selected{% endif %}>Cybersecurity Analyst</option>
                                    <option value="IT Manager" {% if profession == 'IT Manager' %}selected{% endif %}>IT Manager/Team Lead</option>
                                    <option value="System Administrator" {% if profession == 'System Administrator' %}selected{% endif %}>System Administrator</option>
                                </optgroup>
                                <optgroup label="Healthcare">
                                    <option value="Doctor" {% if profession == 'Doctor' %}selected{% endif %}>Doctor/Physician</option>
                                    <option value="Surgeon" {% if profession == 'Surgeon' %}selected{% endif %}>Surgeon</option>
                                    <option value="Dentist" {% if profession == 'Dentist' %}selected{% endif %}>Dentist</option>
                                    <option value="Pharmacist" {% if profession == 'Pharmacist' %}selected{% endif %}>Pharmacist</option>
                                    <option value="Medical Researcher" {% if profession == 'Medical Researcher' %}selected{% endif %}>Medical Researcher</option>
                                    <option value="Nurse" {% if profession == 'Nurse' %}selected{% endif %}>Nurse/Nursing Staff</option>
                                    <option value="Medical Technician" {% if profession == 'Medical Technician' %}selected{% endif %}>Medical Technician</option>
                                    <option value="Hospital Administrator" {% if profession == 'Hospital Administrator' %}selected{% endif %}>Hospital Administrator/Manager</option>
                                </optgroup>
                                <optgroup label="Business">
                                    <option value="Business Consultant" {% if profession == 'Business Consultant' %}selected{% endif %}>Business Consultant/Advisor</option>
                                    <option value="Product Manager" {% if profession == 'Product Manager' %}selected{% endif %}>Product Manager</option>
                                    <option value="Marketing Manager" {% if profession == 'Marketing Manager' %}selected{% endif %}>Marketing Manager/Team</option>
                                    <option value="Financial Analyst" {% if profession == 'Financial Analyst' %}selected{% endif %}>Financial Analyst/Advisor</option>
                                    <option value="Entrepreneur" {% if profession == 'Entrepreneur' %}selected{% endif %}>Entrepreneur/Business Owner</option>
                                    <option value="Sales Manager" {% if profession == 'Sales Manager' %}selected{% endif %}>Sales Manager/Team</option>
                                    <option value="HR Manager" {% if profession == 'HR Manager' %}selected{% endif %}>HR Manager/Team</option>
                                    <option value="Operations Manager" {% if profession == 'Operations Manager' %}selected{% endif %}>Operations Manager</option>
                                </optgroup>
                                <optgroup label="Education">
                                    <option value="Professor" {% if profession == 'Professor' %}selected{% endif %}>Professor/Lecturer</option>
                                    <option value="Teacher" {% if profession == 'Teacher' %}selected{% endif %}>Teacher/Educator</option>
                                    <option value="Education Consultant" {% if profession == 'Education Consultant' %}selected{% endif %}>Education Consultant/Advisor</option>
                                    <option value="University Student" {% if profession == 'University Student' %}selected{% endif %}>University Student</option>
                                    <option value="Researcher" {% if profession == 'Researcher' %}selected{% endif %}>Researcher/Scholar</option>
                                    <option value="School Administrator" {% if profession == 'School Administrator' %}selected{% endif %}>School Administrator/Principal</option>
                                    <option value="Counselor" {% if profession == 'Counselor' %}selected{% endif %}>Counselor/Advisor</option>
                                </optgroup>
                                <optgroup label="Creative & Media">
                                    <option value="Graphic Designer" {% if profession == 'Graphic Designer' %}selected{% endif %}>Graphic Designer</option>
                                    <option value="Content Writer" {% if profession == 'Content Writer' %}selected{% endif %}>Content Writer/Editor</option>
                                    <option value="Journalist" {% if profession == 'Journalist' %}selected{% endif %}>Journalist/Reporter</option>
                                    <option value="Photographer" {% if profession == 'Photographer' %}selected{% endif %}>Photographer</option>
                                    <option value="Video Editor" {% if profession == 'Video Editor' %}selected{% endif %}>Video Editor/Producer</option>
                                </optgroup>
                                <optgroup label="Legal">
                                    <option value="Lawyer" {% if profession == 'Lawyer' %}selected{% endif %}>Lawyer/Attorney</option>
                                    <option value="Legal Advisor" {% if profession == 'Legal Advisor' %}selected{% endif %}>Legal Advisor/Consultant</option>
                                    <option value="Judge" {% if profession == 'Judge' %}selected{% endif %}>Judge</option>
                                    <option value="Paralegal" {% if profession == 'Paralegal' %}selected{% endif %}>Paralegal/Legal Assistant</option>
                                </optgroup>
                                <optgroup label="Government & Public Service">
                                    <option value="Government Officer" {% if profession == 'Government Officer' %}selected{% endif %}>Government Officer</option>
                                    <option value="Police Officer" {% if profession == 'Police Officer' %}selected{% endif %}>Police Officer</option>
                                    <option value="Social Worker" {% if profession == 'Social Worker' %}selected{% endif %}>Social Worker</option>
                                    <option value="Public Administrator" {% if profession == 'Public Administrator' %}selected{% endif %}>Public Administrator</option>
                                </optgroup>
                                <option value="Other" {% if is_other_profession %}selected{% endif %}>Other (Please specify)</option>
                            </select>
                        </div>

                    <!-- Other Profession Field -->
                    <div id="other_profession_field" style="display: {% if is_other_profession %}block{% else %}none{% endif %};">
                        <label class="block text-gray-700 font-semibold mb-2">Specify Your Profession</label>
                        <input type="text" name="other_profession" id="other_profession" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="Enter your profession" value="{% if is_other_profession %}{{ profession }}{% endif %}">
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Skills *</label>
                        <textarea name="skills" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" rows="3" placeholder="Python, Machine Learning, Career Guidance, Interview Preparation...">{{ skills }}</textarea>
                        <p class="text-sm text-gray-500 mt-1"><i class="fas fa-info-circle mr-1"></i>Separate skills with commas</p>
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Role/Position *</label>
                        <input type="text" name="role" value="{{ role }}" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="Senior Software Engineer, Product Manager...">
                    </div>
                </div>
                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Industry/Sector *</label>
                        <select name="industry_sector" id="industry_sector_select" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300">
                            <option value="">Select Industry</option>
                            <option value="Technology" {% if industry_sector == 'Technology' %}selected{% endif %}>ğŸ’» Technology</option>
                            <option value="Healthcare" {% if industry_sector == 'Healthcare' %}selected{% endif %}>ğŸ¥ Healthcare</option>
                            <option value="Education" {% if industry_sector == 'Education' %}selected{% endif %}>ğŸ“ Education</option>
                            <option value="Finance" {% if industry_sector == 'Finance' %}selected{% endif %}>ğŸ’° Finance</option>
                            <option value="Business" {% if industry_sector == 'Business' %}selected{% endif %}>ğŸ’¼ Business</option>
                            <option value="Creative Arts" {% if industry_sector == 'Creative Arts' %}selected{% endif %}>ğŸ¨ Creative Arts</option>
                            <option value="Science & Research" {% if industry_sector == 'Science & Research' %}selected{% endif %}>ğŸ”¬ Science & Research</option>
                            <option value="Government" {% if industry_sector == 'Government' %}selected{% endif %}>ğŸ›ï¸ Government</option>
                            <option value="Non-Profit" {% if industry_sector == 'Non-Profit' %}selected{% endif %}>ğŸ¤ Non-Profit</option>
                            <option value="Manufacturing" {% if industry_sector == 'Manufacturing' %}selected{% endif %}>ğŸ­ Manufacturing</option>
                            <option value="Retail" {% if industry_sector == 'Retail' %}selected{% endif %}>ğŸ›ï¸ Retail</option>
                            <option value="Hospitality" {% if industry_sector == 'Hospitality' %}selected{% endif %}>ğŸ¨ Hospitality</option>
                            <option value="Legal" {% if industry_sector == 'Legal' %}selected{% endif %}>âš–ï¸ Legal</option>
                            <option value="Media & Entertainment" {% if industry_sector == 'Media & Entertainment' %}selected{% endif %}>ğŸ¬ Media & Entertainment</option>
                            <option value="Real Estate" {% if industry_sector == 'Real Estate' %}selected{% endif %}>ğŸ  Real Estate</option>
                            <option value="Agriculture" {% if industry_sector == 'Agriculture' %}selected{% endif %}>ğŸŒ¾ Agriculture</option>
                            <option value="Other" {% if industry_sector and industry_sector not in ['Technology', 'Healthcare', 'Education', 'Finance', 'Business', 'Creative Arts', 'Science & Research', 'Government', 'Non-Profit', 'Manufacturing', 'Retail', 'Hospitality', 'Legal', 'Media & Entertainment', 'Real Estate', 'Agriculture'] %}selected{% endif %}>ğŸ”¶ Other</option>
                        </select>
                    </div>

                    <!-- Other Industry/Sector Field -->
                    <div id="other_industry_sector_field" style="display: {% if industry_sector and industry_sector not in ['Technology', 'Healthcare', 'Education', 'Finance', 'Business', 'Creative Arts', 'Science & Research', 'Government', 'Non-Profit', 'Manufacturing', 'Retail', 'Hospitality', 'Legal', 'Media & Entertainment', 'Real Estate', 'Agriculture', ''] %}block{% else %}none{% endif %};">
                        <label class="block text-gray-700 font-semibold mb-2">Specify Your Industry/Sector</label>
                        <input type="text" name="other_industry_sector" id="other_industry_sector" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="Enter your industry/sector" value="{% if industry_sector and industry_sector not in ['Technology', 'Healthcare', 'Education', 'Finance', 'Business', 'Creative Arts', 'Science & Research', 'Government', 'Non-Profit', 'Manufacturing', 'Retail', 'Hospitality', 'Legal', 'Media & Entertainment', 'Real Estate', 'Agriculture', ''] %}{{ industry_sector }}{% endif %}">
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Organisation/Company *</label>
                        <input type="text" name="organisation" value="{{ organisation }}" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300">
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Years of Experience *</label>
                        <select name="years_of_experience" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300">
                            <option value="">Select Experience</option>
                            <option value="0-2" {% if years_of_experience == '0-2' %}selected{% endif %}>0-2 years (Beginner)</option>
                            <option value="3-5" {% if years_of_experience == '3-5' %}selected{% endif %}>3-5 years (Intermediate)</option>
                            <option value="6-10" {% if years_of_experience == '6-10' %}selected{% endif %}>6-10 years (Experienced)</option>
                            <option value="11-15" {% if years_of_experience == '11-15' %}selected{% endif %}>11-15 years (Senior)</option>
                            <option value="15+" {% if years_of_experience == '15+' %}selected{% endif %}>15+ years (Expert)</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">affiliated Institution *</label>
                        <select name="institution" id="institution" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" required>
                            <option value="">Select Your Institution</option>
                            <option value="Self" {% if institution == 'Self' %}selected{% endif %}>Self (Not affiliated with any institution)</option>
                            {% for inst in institutions %}
                                <option value="{{ inst.name }}" 
                                    {% if institution == inst.name %}selected{% endif %}>
                                    {{ inst.name }}
                                </option>
                            {% endfor %}
                            <option value="Other" 
                                {% if institution and institution not in institutions|map(attribute='name')|list %}selected{% endif %}>
                                Other
                            </option>
                        </select>
                    </div>

                    <!-- Other Institution Field -->
                    <div id="other_institution_field" style="display: {% if institution and institution not in institutions|map(attribute='name')|list %}block{% else %}none{% endif %};">
                        <label class="block text-gray-700 font-semibold mb-2">Specify Your Institution</label>
                        <input type="text" name="other_institution_name" id="other_institution_name" 
                               class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300"
                               placeholder="Enter your institution name"
                               value="{% if institution and institution not in institutions|map(attribute='name')|list %}{{ institution }}{% endif %}">
                    </div>
                </div>
            </div>
        </div>

        <!-- Contact & Location Information -->
        <div class="bg-white p-8 rounded-2xl shadow-lg border border-blue-100">
            <h3 class="text-3xl font-bold text-gray-800 mb-6 pb-3 border-b-2 border-blue-100">
                <i class="fas fa-map-marker-alt text-green-500 mr-3"></i>Contact & Location
            </h3>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">WhatsApp Number *</label>
                        <div class="flex gap-2">
                            <input type="text" name="whatsapp_country_code" list="country_codes" value="{{ whatsapp_country_code or '+91' }}" class="w-24 p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="+91">
                            <input type="tel" name="whatsapp" value="{{ whatsapp }}" class="flex-1 p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="Enter WhatsApp number">
                        </div>
                    </div>

                    {% set country_options = ['India', 'Pakistan', 'Bangladesh', 'Nepal', 'Sri Lanka', 'China', 'Japan', 'South Korea', 'Singapore', 'Malaysia', 'Indonesia', 'Philippines', 'Thailand', 'Vietnam', 'UAE', 'Saudi Arabia', 'Qatar', 'Kuwait', 'Oman', 'Bahrain', 'Israel', 'Turkey', 'UK', 'Germany', 'France', 'Italy', 'Spain', 'Netherlands', 'Belgium', 'Luxembourg', 'Switzerland', 'Austria', 'Sweden', 'Norway', 'Denmark', 'Finland', 'Poland', 'Portugal', 'Greece', 'Czech Republic', 'Hungary', 'Russia', 'Ukraine', 'Ireland', 'USA', 'Canada', 'Mexico', 'Brazil', 'Argentina', 'Chile', 'Colombia', 'Australia', 'New Zealand', 'South Africa', 'Nigeria', 'Kenya', 'Egypt', 'Morocco'] %}
                    {% set is_other_country = country and country not in country_options %}
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Country *</label>
                        <select name="country" id="country_select" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300">
                            <option value="">Select Country</option>
                            <optgroup label="Asia">
                                <option value="India" {% if country == 'India' %}selected{% endif %}>ğŸ‡®ğŸ‡³ India</option>
                                <option value="Pakistan" {% if country == 'Pakistan' %}selected{% endif %}>ğŸ‡µğŸ‡° Pakistan</option>
                                <option value="Bangladesh" {% if country == 'Bangladesh' %}selected{% endif %}>ğŸ‡§ğŸ‡© Bangladesh</option>
                                <option value="Nepal" {% if country == 'Nepal' %}selected{% endif %}>ğŸ‡³ğŸ‡µ Nepal</option>
                                <option value="Sri Lanka" {% if country == 'Sri Lanka' %}selected{% endif %}>ğŸ‡±ğŸ‡° Sri Lanka</option>
                                <option value="China" {% if country == 'China' %}selected{% endif %}>ğŸ‡¨ğŸ‡³ China</option>
                                <option value="Japan" {% if country == 'Japan' %}selected{% endif %}>ğŸ‡¯ğŸ‡µ Japan</option>
                                <option value="South Korea" {% if country == 'South Korea' %}selected{% endif %}>ğŸ‡°ğŸ‡· South Korea</option>
                                <option value="Singapore" {% if country == 'Singapore' %}selected{% endif %}>ğŸ‡¸ğŸ‡¬ Singapore</option>
                                <option value="Malaysia" {% if country == 'Malaysia' %}selected{% endif %}>ğŸ‡²ğŸ‡¾ Malaysia</option>
                                <option value="Indonesia" {% if country == 'Indonesia' %}selected{% endif %}>ğŸ‡®ğŸ‡© Indonesia</option>
                                <option value="Philippines" {% if country == 'Philippines' %}selected{% endif %}>ğŸ‡µğŸ‡­ Philippines</option>
                                <option value="Thailand" {% if country == 'Thailand' %}selected{% endif %}>ğŸ‡¹ğŸ‡­ Thailand</option>
                                <option value="Vietnam" {% if country == 'Vietnam' %}selected{% endif %}>ğŸ‡»ğŸ‡³ Vietnam</option>
                            </optgroup>
                            <optgroup label="Middle East">
                                <option value="UAE" {% if country == 'UAE' %}selected{% endif %}>ğŸ‡¦ğŸ‡ª UAE</option>
                                <option value="Saudi Arabia" {% if country == 'Saudi Arabia' %}selected{% endif %}>ğŸ‡¸ğŸ‡¦ Saudi Arabia</option>
                                <option value="Qatar" {% if country == 'Qatar' %}selected{% endif %}>ğŸ‡¶ğŸ‡¦ Qatar</option>
                                <option value="Kuwait" {% if country == 'Kuwait' %}selected{% endif %}>ğŸ‡°ğŸ‡¼ Kuwait</option>
                                <option value="Oman" {% if country == 'Oman' %}selected{% endif %}>ğŸ‡´ğŸ‡² Oman</option>
                                <option value="Bahrain" {% if country == 'Bahrain' %}selected{% endif %}>ğŸ‡§ğŸ‡­ Bahrain</option>
                                <option value="Israel" {% if country == 'Israel' %}selected{% endif %}>ğŸ‡®ğŸ‡± Israel</option>
                                <option value="Turkey" {% if country == 'Turkey' %}selected{% endif %}>ğŸ‡¹ğŸ‡· Turkey</option>
                            </optgroup>
                            <optgroup label="Europe">
                                <option value="UK" {% if country == 'UK' %}selected{% endif %}>ğŸ‡¬ğŸ‡§ United Kingdom</option>
                                <option value="Germany" {% if country == 'Germany' %}selected{% endif %}>ğŸ‡©ğŸ‡ª Germany</option>
                                <option value="France" {% if country == 'France' %}selected{% endif %}>ğŸ‡«ğŸ‡· France</option>
                                <option value="Italy" {% if country == 'Italy' %}selected{% endif %}>ğŸ‡®ğŸ‡¹ Italy</option>
                                <option value="Spain" {% if country == 'Spain' %}selected{% endif %}>ğŸ‡ªğŸ‡¸ Spain</option>
                                <option value="Netherlands" {% if country == 'Netherlands' %}selected{% endif %}>ğŸ‡³ğŸ‡± Netherlands</option>
                                <option value="Belgium" {% if country == 'Belgium' %}selected{% endif %}>ğŸ‡§ğŸ‡ª Belgium</option>
                                <option value="Luxembourg" {% if country == 'Luxembourg' %}selected{% endif %}>ğŸ‡±ğŸ‡º Luxembourg</option>
                                <option value="Switzerland" {% if country == 'Switzerland' %}selected{% endif %}>ğŸ‡¨ğŸ‡­ Switzerland</option>
                                <option value="Austria" {% if country == 'Austria' %}selected{% endif %}>ğŸ‡¦ğŸ‡¹ Austria</option>
                                <option value="Sweden" {% if country == 'Sweden' %}selected{% endif %}>ğŸ‡¸ğŸ‡ª Sweden</option>
                                <option value="Norway" {% if country == 'Norway' %}selected{% endif %}>ğŸ‡³ğŸ‡´ Norway</option>
                                <option value="Denmark" {% if country == 'Denmark' %}selected{% endif %}>ğŸ‡©ğŸ‡° Denmark</option>
                                <option value="Finland" {% if country == 'Finland' %}selected{% endif %}>ğŸ‡«ğŸ‡® Finland</option>
                                <option value="Poland" {% if country == 'Poland' %}selected{% endif %}>ğŸ‡µğŸ‡± Poland</option>
                                <option value="Portugal" {% if country == 'Portugal' %}selected{% endif %}>ğŸ‡µğŸ‡¹ Portugal</option>
                                <option value="Greece" {% if country == 'Greece' %}selected{% endif %}>ğŸ‡¬ğŸ‡· Greece</option>
                                <option value="Czech Republic" {% if country == 'Czech Republic' %}selected{% endif %}>ğŸ‡¨ğŸ‡¿ Czech Republic</option>
                                <option value="Hungary" {% if country == 'Hungary' %}selected{% endif %}>ğŸ‡­ğŸ‡º Hungary</option>
                                <option value="Russia" {% if country == 'Russia' %}selected{% endif %}>ğŸ‡·ğŸ‡º Russia</option>
                                <option value="Ukraine" {% if country == 'Ukraine' %}selected{% endif %}>ğŸ‡ºğŸ‡¦ Ukraine</option>
                                <option value="Ireland" {% if country == 'Ireland' %}selected{% endif %}>ğŸ‡®ğŸ‡ª Ireland</option>
                            </optgroup>
                            <optgroup label="Americas">
                                <option value="USA" {% if country == 'USA' %}selected{% endif %}>ğŸ‡ºğŸ‡¸ United States</option>
                                <option value="Canada" {% if country == 'Canada' %}selected{% endif %}>ğŸ‡¨ğŸ‡¦ Canada</option>
                                <option value="Mexico" {% if country == 'Mexico' %}selected{% endif %}>ğŸ‡²ğŸ‡½ Mexico</option>
                                <option value="Brazil" {% if country == 'Brazil' %}selected{% endif %}>ğŸ‡§ğŸ‡· Brazil</option>
                                <option value="Argentina" {% if country == 'Argentina' %}selected{% endif %}>ğŸ‡¦ğŸ‡· Argentina</option>
                                <option value="Chile" {% if country == 'Chile' %}selected{% endif %}>ğŸ‡¨ğŸ‡± Chile</option>
                                <option value="Colombia" {% if country == 'Colombia' %}selected{% endif %}>ğŸ‡¨ğŸ‡´ Colombia</option>
                            </optgroup>
                            <optgroup label="Oceania">
                                <option value="Australia" {% if country == 'Australia' %}selected{% endif %}>ğŸ‡¦ğŸ‡º Australia</option>
                                <option value="New Zealand" {% if country == 'New Zealand' %}selected{% endif %}>ğŸ‡³ğŸ‡¿ New Zealand</option>
                            </optgroup>
                            <optgroup label="Africa">
                                <option value="South Africa" {% if country == 'South Africa' %}selected{% endif %}>ğŸ‡¿ğŸ‡¦ South Africa</option>
                                <option value="Nigeria" {% if country == 'Nigeria' %}selected{% endif %}>ğŸ‡³ğŸ‡¬ Nigeria</option>
                                <option value="Kenya" {% if country == 'Kenya' %}selected{% endif %}>ğŸ‡°ğŸ‡ª Kenya</option>
                                <option value="Egypt" {% if country == 'Egypt' %}selected{% endif %}>ğŸ‡ªğŸ‡¬ Egypt</option>
                                <option value="Morocco" {% if country == 'Morocco' %}selected{% endif %}>ğŸ‡²ğŸ‡¦ Morocco</option>
                            </optgroup>
                            <option value="Other" {% if is_other_country %}selected{% endif %}>ğŸŒ Other (Please specify)</option>
                        </select>
                    </div>

                    <!-- Other Country Field -->
                    <div id="other_country_field" style="display: {% if is_other_country %}block{% else %}none{% endif %};">
                        <label class="block text-gray-700 font-semibold mb-2">Specify Your Country</label>
                        <input type="text" name="other_country" id="other_country" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="Enter your country name" value="{% if is_other_country %}{{ country }}{% endif %}">
                    </div>

<div>
    <label class="block text-gray-700 font-semibold mb-2">Language(s) *</label>
    
    <!-- Selected languages will appear here as tags -->
    <div id="selected_languages_container" class="flex flex-wrap gap-2 mb-2 p-2 border border-gray-300 rounded-lg min-h-[3rem] bg-gray-50">
        {% if language %}
            {% set language_list = language.split(',') if language is string else language %}
            {% for lang in language_list %}
                <div class="inline-flex items-center bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full">
                    <span>{{ lang.strip() }}</span>
                    <button type="button" class="ml-2 text-blue-600 hover:text-blue-800 remove-language-btn" data-value="{{ lang.strip() }}">
                        &times;
                    </button>
                </div>
            {% endfor %}
        {% endif %}
    </div>

    <!-- Dropdown toggle button -->
    <div class="relative">
        <button type="button" id="language_dropdown_toggle" class="w-full p-3 border-2 border-gray-200 rounded-xl text-left focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300 bg-white">
            <span class="text-gray-500">Select Languages...</span>
            <span class="float-right">â–¼</span>
        </button>
<!-- Dropdown menu with checkboxes -->
<div id="language_dropdown_menu" class="hidden absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-xl shadow-lg max-h-80 overflow-y-auto">
    <!-- World's Top 10 Most Spoken Languages -->
    <div class="p-2 border-b bg-blue-50">
        <p class="font-bold text-gray-800 mb-1">ğŸŒ World's Top 10 Most Spoken Languages</p>
        
        <label class="flex items-center p-2 hover:bg-blue-100 cursor-pointer rounded">
            <input type="checkbox" value="English" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span class="font-medium">ğŸ‡¬ğŸ‡§ English</span>
            <span class="ml-auto text-sm text-gray-500">1.5B+ speakers</span>
        </label>
        
        <label class="flex items-center p-2 hover:bg-blue-100 cursor-pointer rounded">
            <input type="checkbox" value="Chinese (Mandarin)" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span class="font-medium">ğŸ‡¨ğŸ‡³ Chinese (Mandarin)</span>
            <span class="ml-auto text-sm text-gray-500">1.1B+ speakers</span>
        </label>
        
        <label class="flex items-center p-2 hover:bg-blue-100 cursor-pointer rounded">
            <input type="checkbox" value="Hindi" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span class="font-medium">ğŸ‡®ğŸ‡³ Hindi</span>
            <span class="ml-auto text-sm text-gray-500">602M+ speakers</span>
        </label>
        
        <label class="flex items-center p-2 hover:bg-blue-100 cursor-pointer rounded">
            <input type="checkbox" value="Spanish" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span class="font-medium">ğŸ‡ªğŸ‡¸ Spanish</span>
            <span class="ml-auto text-sm text-gray-500">548M+ speakers</span>
        </label>
        
        <label class="flex items-center p-2 hover:bg-blue-100 cursor-pointer rounded">
            <input type="checkbox" value="French" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span class="font-medium">ğŸ‡«ğŸ‡· French</span>
            <span class="ml-auto text-sm text-gray-500">280M+ speakers</span>
        </label>
        
        <label class="flex items-center p-2 hover:bg-blue-100 cursor-pointer rounded">
            <input type="checkbox" value="Arabic" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span class="font-medium">ğŸ‡¸ğŸ‡¦ Arabic</span>
            <span class="ml-auto text-sm text-gray-500">274M+ speakers</span>
        </label>
        
        <label class="flex items-center p-2 hover:bg-blue-100 cursor-pointer rounded">
            <input type="checkbox" value="Bengali" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span class="font-medium">ğŸ‡§ğŸ‡© Bengali</span>
            <span class="ml-auto text-sm text-gray-500">272M+ speakers</span>
        </label>
        
        <label class="flex items-center p-2 hover:bg-blue-100 cursor-pointer rounded">
            <input type="checkbox" value="Russian" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span class="font-medium">ğŸ‡·ğŸ‡º Russian</span>
            <span class="ml-auto text-sm text-gray-500">258M+ speakers</span>
        </label>
        
        <label class="flex items-center p-2 hover:bg-blue-100 cursor-pointer rounded">
            <input type="checkbox" value="Portuguese" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span class="font-medium">ğŸ‡µğŸ‡¹ Portuguese</span>
            <span class="ml-auto text-sm text-gray-500">257M+ speakers</span>
        </label>
        
        <label class="flex items-center p-2 hover:bg-blue-100 cursor-pointer rounded">
            <input type="checkbox" value="Urdu" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span class="font-medium">ğŸ‡µğŸ‡° Urdu</span>
            <span class="ml-auto text-sm text-gray-500">231M+ speakers</span>
        </label>
    </div>

    <!-- Indian Languages (Additional) -->
    <div class="p-2 border-b">
        <p class="font-semibold text-gray-700 mb-1">ğŸ‡®ğŸ‡³ Indian Languages</p>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Tamil" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>à®¤à®®à®¿à®´à¯ Tamil</span>
            <span class="ml-auto text-sm text-gray-500">83M+</span>
        </label>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Telugu" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>à°¤à±†à°²à±à°—à± Telugu</span>
            <span class="ml-auto text-sm text-gray-500">82M+</span>
        </label>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Marathi" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>à¤®à¤°à¤¾à¤ à¥€ Marathi</span>
            <span class="ml-auto text-sm text-gray-500">83M+</span>
        </label>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Gujarati" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>àª—à«àªœàª°àª¾àª¤à«€ Gujarati</span>
            <span class="ml-auto text-sm text-gray-500">57M+</span>
        </label>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Kannada" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>à²•à²¨à³à²¨à²¡ Kannada</span>
            <span class="ml-auto text-sm text-gray-500">44M+</span>
        </label>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Malayalam" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>à´®à´²à´¯à´¾à´³à´‚ Malayalam</span>
            <span class="ml-auto text-sm text-gray-500">38M+</span>
        </label>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Punjabi" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>à¨ªà©°à¨œà¨¾à¨¬à©€ Punjabi</span>
            <span class="ml-auto text-sm text-gray-500">113M+</span>
        </label>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Odia" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>à¬“à¬¡à¬¼à¬¿à¬† Odia</span>
            <span class="ml-auto text-sm text-gray-500">38M+</span>
        </label>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Assamese" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>à¦…à¦¸à¦®à§€à¦¯à¦¼à¦¾ Assamese</span>
            <span class="ml-auto text-sm text-gray-500">15M+</span>
        </label>
    </div>

    <!-- European Languages (Additional) -->
    <div class="p-2 border-b">
        <p class="font-semibold text-gray-700 mb-1">ğŸ‡ªğŸ‡º European Languages</p>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="German" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>ğŸ‡©ğŸ‡ª German</span>
            <span class="ml-auto text-sm text-gray-500">134M+</span>
        </label>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Italian" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>ğŸ‡®ğŸ‡¹ Italian</span>
            <span class="ml-auto text-sm text-gray-500">67M+</span>
        </label>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Dutch" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>ğŸ‡³ğŸ‡± Dutch</span>
            <span class="ml-auto text-sm text-gray-500">24M+</span>
        </label>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Polish" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>ğŸ‡µğŸ‡± Polish</span>
            <span class="ml-auto text-sm text-gray-500">45M+</span>
        </label>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Swedish" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>ğŸ‡¸ğŸ‡ª Swedish</span>
            <span class="ml-auto text-sm text-gray-500">10M+</span>
        </label>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Greek" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>ğŸ‡¬ğŸ‡· Greek</span>
            <span class="ml-auto text-sm text-gray-500">13M+</span>
        </label>
    </div>

    <!-- Asian Languages (Additional) -->
    <div class="p-2 border-b">
        <p class="font-semibold text-gray-700 mb-1">ğŸŒ Asian Languages</p>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Japanese" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>ğŸ‡¯ğŸ‡µ Japanese</span>
            <span class="ml-auto text-sm text-gray-500">126M+</span>
        </label>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Korean" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>ğŸ‡°ğŸ‡· Korean</span>
            <span class="ml-auto text-sm text-gray-500">81M+</span>
        </label>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Thai" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>ğŸ‡¹ğŸ‡­ Thai</span>
            <span class="ml-auto text-sm text-gray-500">61M+</span>
        </label>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Vietnamese" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>ğŸ‡»ğŸ‡³ Vietnamese</span>
            <span class="ml-auto text-sm text-gray-500">85M+</span>
        </label>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Indonesian" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>ğŸ‡®ğŸ‡© Indonesian</span>
            <span class="ml-auto text-sm text-gray-500">199M+</span>
        </label>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Malay" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>ğŸ‡²ğŸ‡¾ Malay</span>
            <span class="ml-auto text-sm text-gray-500">77M+</span>
        </label>
    </div>

    <!-- Middle Eastern Languages (Additional) -->
    <div class="p-2 border-b">
        <p class="font-semibold text-gray-700 mb-1">ğŸ•Œ Middle Eastern Languages</p>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Persian" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>ğŸ‡®ğŸ‡· Persian (Farsi)</span>
            <span class="ml-auto text-sm text-gray-500">77M+</span>
        </label>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Turkish" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>ğŸ‡¹ğŸ‡· Turkish</span>
            <span class="ml-auto text-sm text-gray-500">88M+</span>
        </label>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Hebrew" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>ğŸ‡®ğŸ‡± Hebrew</span>
            <span class="ml-auto text-sm text-gray-500">9M+</span>
        </label>
    </div>

    <!-- African Languages -->
    <div class="p-2 border-b">
        <p class="font-semibold text-gray-700 mb-1">ğŸŒ African Languages</p>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Swahili" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>ğŸ‡°ğŸ‡ª Swahili</span>
            <span class="ml-auto text-sm text-gray-500">98M+</span>
        </label>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Afrikaans" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>ğŸ‡¿ğŸ‡¦ Afrikaans</span>
            <span class="ml-auto text-sm text-gray-500">17M+</span>
        </label>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Hausa" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>ğŸ‡³ğŸ‡¬ Hausa</span>
            <span class="ml-auto text-sm text-gray-500">63M+</span>
        </label>
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Yoruba" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span>ğŸ‡³ğŸ‡¬ Yoruba</span>
            <span class="ml-auto text-sm text-gray-500">43M+</span>
        </label>
    </div>

    <!-- Other Option -->
    <div class="p-2">
        <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
            <input type="checkbox" value="Other" class="mr-3 h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 language-checkbox">
            <span class="font-medium">ğŸŒ Other Language</span>
        </label>
    </div>
</div>
    </div>

    <!-- Other Language Input Field -->
    <div id="other_language_field" style="display: none;" class="mt-3">
        <label class="block text-gray-700 font-semibold mb-2">Specify Other Language(s)</label>
        <input type="text" name="other_language" id="other_language_input" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="Enter language(s), separated by commas">
    </div>

    <!-- Hidden input to store selected languages -->
    <input type="hidden" name="language" id="language_hidden_input" value="{{ language or '' }}">

    <p class="text-sm text-gray-500 mt-1"><i class="fas fa-mouse-pointer mr-1"></i>Click to select multiple languages</p>
</div>

                    <!-- Other Language Field -->
                    <div id="other_language_field" style="display: none;">
                        <label class="block text-gray-700 font-semibold mb-2">Specify Other Language(s)</label>
                        <input type="text" name="other_language" id="other_language" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="Enter language(s), separated by commas">
                    </div>
                </div>
                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">City *</label>
                        <input type="text" name="city" value="{{ city }}" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300">
                    </div>

                    <!-- Criminal Certificate Upload (Mandatory for Luxembourg) -->
                    <div id="criminal_certificate_field">
                        <label class="block text-gray-700 font-semibold mb-2">
                            <i class="fas fa-file-pdf text-red-600 mr-2"></i>Criminal Certificate (PDF)
                            <span id="luxembourg_required_badge" class="text-red-600 font-bold" style="display: none;">*</span>
                        </label>
                        <div class="space-y-2">
                            {% if criminal_certificate %}
                            <div class="flex items-center gap-2 p-3 bg-green-50 border-2 border-green-200 rounded-xl">
                                <i class="fas fa-check-circle text-green-600"></i>
                                <span class="text-sm text-green-700">Current file: {{ criminal_certificate }}</span>
                                <a href="{{ url_for('static', filename='uploads/' + criminal_certificate) }}" target="_blank" class="ml-auto text-blue-600 hover:text-blue-800">
                                    <i class="fas fa-external-link-alt"></i> View
                                </a>
                            </div>
                            {% endif %}
                            <label class="block">
                                <div class="flex items-center justify-center w-full p-4 border-2 border-dashed border-gray-300 rounded-xl hover:border-blue-500 cursor-pointer transition duration-300 bg-gray-50 hover:bg-blue-50">
                                    <div class="text-center">
                                        <i class="fas fa-cloud-upload-alt text-3xl text-gray-400 mb-2"></i>
                                        <p class="text-sm text-gray-600">
                                            <span class="font-semibold text-blue-600">Click to upload</span> or drag and drop
                                        </p>
                                        <p class="text-xs text-gray-500 mt-1">PDF only (Max 10MB)</p>
                                    </div>
                                    <input type="file" name="criminal_certificate" id="criminal_certificate_input" class="hidden" accept=".pdf" onchange="previewPDF(this)">
                                </div>
                            </label>
                            <div id="pdf_preview" class="hidden p-3 bg-blue-50 border-2 border-blue-200 rounded-xl">
                                <div class="flex items-center gap-2">
                                    <i class="fas fa-file-pdf text-red-600 text-2xl"></i>
                                    <div class="flex-1">
                                        <p class="text-sm font-semibold text-gray-800" id="pdf_filename"></p>
                                        <p class="text-xs text-gray-600" id="pdf_filesize"></p>
                                    </div>
                                    <button type="button" onclick="clearPDF()" class="text-red-600 hover:text-red-800">
                                        <i class="fas fa-times-circle"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <p class="text-xs text-gray-500 mt-2">
                            <i class="fas fa-info-circle mr-1"></i>
                            <span id="luxembourg_message" style="display: none;" class="text-red-600 font-semibold">Required for mentors in Luxembourg</span>
                            <span id="optional_message">Optional for all other countries</span>
                        </p>
                    </div>


                </div>
            </div>
        </div>

        <!-- Educational Information -->
        <div class="bg-white p-8 rounded-2xl shadow-lg border border-blue-100">
            <h3 class="text-3xl font-bold text-gray-800 mb-6 pb-3 border-b-2 border-blue-100">
                <i class="fas fa-graduation-cap text-indigo-500 mr-3"></i>Educational Information
            </h3>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Highest Qualification</label>
                        <select name="highest_qualification" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300">
                            <option value="">Select Qualification</option>
                            <option value="Bachelor's" {% if highest_qualification == "Bachelor's" %}selected{% endif %}>Bachelor's Degree</option>
                            <option value="Master's" {% if highest_qualification == "Master's" %}selected{% endif %}>Master's Degree</option>
                            <option value="PhD" {% if highest_qualification == "PhD" %}selected{% endif %}>PhD / Doctorate</option>
                            <option value="Postdoctoral" {% if highest_qualification == "Postdoctoral" %}selected{% endif %}>Postdoctoral</option>
                            <option value="Professional Certification" {% if highest_qualification == "Professional Certification" %}selected{% endif %}>Professional Certification</option>
                            <option value="Diploma" {% if highest_qualification == "Diploma" %}selected{% endif %}>Diploma</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Titile Of Degree</label>
                        <input type="text" name="degree_name" value="{{ degree_name or '' }}" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="e.g., B.Tech, MBA, M.Sc, PhD">
                        <p class="text-sm text-gray-500 mt-1"><i class="fas fa-info-circle mr-1"></i>Enter the specific degree name</p>
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Field of Study / Specialization</label>
                        <input type="text" name="field_of_study" value="{{ field_of_study or '' }}" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="e.g., Computer Science, Mechanical Engineering, Business Administration">
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">University / Collage Name</label>
                        <input type="text" name="university_name" value="{{ university_name or '' }}" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="e.g., IIT Delhi, Stanford University, Oxford University">
                    </div>
                </div>

                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Year of Graduation</label>
                        <input type="number" name="graduation_year" value="{{ graduation_year or '' }}" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="e.g., 2020" min="1950" max="2099">
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Academic Status</label>
                        <select name="academic_status" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300">
                            <option value="">Select Status</option>
                            <option value="Completed" {% if academic_status == "Completed" %}selected{% endif %}>âœ… Completed</option>
                            <option value="Pursuing" {% if academic_status == "Pursuing" %}selected{% endif %}>ğŸ“š Pursuing</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Certifications or Professional Courses</label>
                        <textarea name="certifications" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" rows="3" placeholder="e.g., AWS Certified Solutions Architect, Google Cloud Professional, PMP, etc.">{{ certifications or '' }}</textarea>
                        <p class="text-sm text-gray-500 mt-1"><i class="fas fa-info-circle mr-1"></i>Separate multiple certifications with commas or line breaks</p>
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Research Work or Thesis Title (Optional)</label>
                        <textarea name="research_work" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" rows="3" placeholder="e.g., 'Machine Learning Applications in Healthcare' or 'Quantum Computing Algorithms'">{{ research_work or '' }}</textarea>
                        <p class="text-sm text-gray-500 mt-1"><i class="fas fa-info-circle mr-1"></i>Share your research work or thesis title if applicable</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Social Links -->
        <div class="bg-white p-8 rounded-2xl shadow-lg border border-blue-100">
            <h3 class="text-3xl font-bold text-gray-800 mb-6 pb-3 border-b-2 border-blue-100">
                <i class="fas fa-share-alt text-purple-500 mr-3"></i>Social Links
            </h3>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">
                            <i class="fab fa-linkedin text-blue-600 mr-2"></i>LinkedIn Profile
                        </label>
                        <input type="url" name="linkedin_link" value="{{ linkedin_link }}" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="https://linkedin.com/in/yourprofile">
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">
                            <i class="fab fa-github text-gray-800 mr-2"></i>GitHub Profile
                        </label>
                        <input type="url" name="github_link" value="{{ github_link }}" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="https://github.com/yourusername">
                    </div>
                </div>
                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">
                            <i class="fas fa-globe text-green-600 mr-2"></i>Portfolio Website
                        </label>
                        <input type="url" name="portfolio_link" value="{{ portfolio_link }}" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="https://yourportfolio.com">
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">
                            <i class="fas fa-link text-gray-600 mr-2"></i>Other Social Link
                        </label>
                        <input type="url" name="other_social_link" value="{{ other_social_link }}" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="https://">
                    </div>
                </div>
            </div>
        </div>

        <!-- Mentorship Preferences -->
        <div class="bg-white p-8 rounded-2xl shadow-lg border border-blue-100">
            <h3 class="text-3xl font-bold text-gray-800 mb-6 pb-3 border-b-2 border-blue-100">
                <i class="fas fa-hands-helping text-yellow-500 mr-3"></i>Mentorship Preferences
            </h3>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="space-y-4">
                    
                    
<div>
    <label class="block text-gray-700 font-semibold mb-2">Mentorship Topics *</label>
    
    <!-- Selected topics will appear here as tags -->
    <div id="selected_topics_container" class="flex flex-wrap gap-2 mb-2 p-2 border border-gray-300 rounded-lg min-h-[3rem] bg-gray-50">
        {% if mentorship_topics %}
            {% set topics_list = mentorship_topics.split(',') if mentorship_topics is string else mentorship_topics %}
            {% for topic in topics_list %}
                <div class="inline-flex items-center bg-green-100 text-green-800 text-sm font-medium px-3 py-1 rounded-full">
                    <span>{{ topic.strip() }}</span>
                    <button type="button" class="ml-2 text-green-600 hover:text-green-800 remove-topic-btn" data-value="{{ topic.strip() }}">
                        &times;
                    </button>
                </div>
            {% endfor %}
        {% endif %}
    </div>

    <!-- Dropdown toggle button -->
    <div class="relative">
        <button type="button" id="topics_dropdown_toggle" class="w-full p-3 border-2 border-gray-200 rounded-xl text-left focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300 bg-white">
            <span class="text-gray-500">Select Mentorship Topics...</span>
            <span class="float-right">â–¼</span>
        </button>

        <!-- Dropdown menu with checkboxes -->
        <div id="topics_dropdown_menu" class="hidden absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-xl shadow-lg max-h-80 overflow-y-auto">
            <!-- Career Development -->
            <div class="p-2 border-b">
                <p class="font-semibold text-gray-700 mb-1">Career Development</p>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Career Guidance" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸ¯ Career Guidance</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Career Transition" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸ”„ Career Transition</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Interview Preparation" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸ“ Interview Preparation</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Resume Building" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸ“„ Resume Building</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Job Search Strategy" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸ” Job Search Strategy</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Salary Negotiation" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸ’° Salary Negotiation</span>
                </label>
            </div>

            <!-- Technical Skills -->
            <div class="p-2 border-b">
                <p class="font-semibold text-gray-700 mb-1">Technical Skills</p>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Programming" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸ’» Programming</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Data Science" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸ“Š Data Science</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Machine Learning" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸ¤– Machine Learning</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Web Development" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸŒ Web Development</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Mobile Development" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸ“± Mobile Development</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Cloud Computing" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>â˜ï¸ Cloud Computing</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Cybersecurity" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸ”’ Cybersecurity</span>
                </label>
            </div>

            <!-- Professional Skills -->
            <div class="p-2 border-b">
                <p class="font-semibold text-gray-700 mb-1">Professional Skills</p>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Leadership" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸŒŸ Leadership</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Project Management" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸ“Š Project Management</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Public Speaking" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸ¤ Public Speaking</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Communication Skills" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸ’¬ Communication Skills</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Time Management" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>â° Time Management</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Team Collaboration" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸ‘¥ Team Collaboration</span>
                </label>
            </div>

            <!-- Academic & Research -->
            <div class="p-2 border-b">
                <p class="font-semibold text-gray-700 mb-1">Academic & Research</p>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Research Methodology" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸ”¬ Research Methodology</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Academic Writing" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>âœï¸ Academic Writing</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Thesis Guidance" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸ“š Thesis Guidance</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Study Abroad" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>âœˆï¸ Study Abroad</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Competitive Exams" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸ“ Competitive Exams</span>
                </label>
            </div>

            <!-- Entrepreneurship -->
            <div class="p-2 border-b">
                <p class="font-semibold text-gray-700 mb-1">Entrepreneurship</p>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Startup Guidance" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸš€ Startup Guidance</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Business Planning" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸ“ˆ Business Planning</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Funding & Investment" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸ’¸ Funding & Investment</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Marketing Strategy" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸ“¢ Marketing Strategy</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Product Management" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸ“¦ Product Management</span>
                </label>
            </div>

            <!-- Personal Development -->
            <div class="p-2">
                <p class="font-semibold text-gray-700 mb-1">Personal Development</p>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Personal Growth" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸŒ± Personal Growth</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Mindset & Motivation" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸ’ª Mindset & Motivation</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Work-Life Balance" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>âš–ï¸ Work-Life Balance</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Networking Skills" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸ¤ Networking Skills</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Personal Branding" class="mr-3 h-5 w-5 rounded border-gray-300 text-green-600 focus:ring-green-500 topic-checkbox">
                    <span>ğŸŒŸ Personal Branding</span>
                </label>
            </div>
        </div>
    </div>

    <!-- Hidden input to store selected topics -->
    <input type="hidden" name="mentorship_topics" id="topics_hidden_input" value="{{ mentorship_topics or '' }}">

    <p class="text-sm text-gray-500 mt-1"><i class="fas fa-mouse-pointer mr-1"></i>Click to select multiple topics</p>
</div>

    <div>
    <label class="block text-gray-700 font-semibold mb-2">Mentorship Type Preference *</label>
    
    <!-- Selected preferences will appear here as tags -->
    <div id="selected_mentorship_prefs_container" class="flex flex-wrap gap-2 mb-2 p-2 border border-gray-300 rounded-lg min-h-[3rem] bg-gray-50">
        {% if mentorship_type_preference %}
            {% set prefs_list = mentorship_type_preference.split(',') if mentorship_type_preference is string else mentorship_type_preference %}
            {% for pref in prefs_list %}
                <div class="inline-flex items-center bg-purple-100 text-purple-800 text-sm font-medium px-3 py-1 rounded-full">
                    <span>{{ pref.strip() }}</span>
                    <button type="button" class="ml-2 text-purple-600 hover:text-purple-800 remove-mentorship-pref-btn" data-value="{{ pref.strip() }}">
                        &times;
                    </button>
                </div>
            {% endfor %}
        {% endif %}
    </div>

    <!-- Dropdown toggle button -->
    <div class="relative">
        <button type="button" id="mentorship_pref_dropdown_toggle" class="w-full p-3 border-2 border-gray-200 rounded-xl text-left focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300 bg-white">
            <span class="text-gray-500">Select Mentorship Preferences...</span>
            <span class="float-right">â–¼</span>
        </button>

        <!-- Dropdown menu with checkboxes -->
        <div id="mentorship_pref_dropdown_menu" class="hidden absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-xl shadow-lg max-h-80 overflow-y-auto">
            <!-- Student Groups -->
            <div class="p-2 border-b">
                <p class="font-semibold text-gray-700 mb-1">Student Groups</p>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="School Students" class="mr-3 h-5 w-5 rounded border-gray-300 text-purple-600 focus:ring-purple-500 mentorship-pref-checkbox">
                    <span>ğŸ’ School Students (6th-12th)</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="College Students" class="mr-3 h-5 w-5 rounded border-gray-300 text-purple-600 focus:ring-purple-500 mentorship-pref-checkbox">
                    <span>ğŸ“ College Students (Undergraduate)</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Graduate Students" class="mr-3 h-5 w-5 rounded border-gray-300 text-purple-600 focus:ring-purple-500 mentorship-pref-checkbox">
                    <span>ğŸ“ Graduate Students (Postgraduate)</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="PhD Scholars" class="mr-3 h-5 w-5 rounded border-gray-300 text-purple-600 focus:ring-purple-500 mentorship-pref-checkbox">
                    <span>ğŸ”¬ PhD Scholars</span>
                </label>
            </div>

            <!-- Professional Groups -->
            <div class="p-2 border-b">
                <p class="font-semibold text-gray-700 mb-1">Professional Groups</p>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Early Professionals" class="mr-3 h-5 w-5 rounded border-gray-300 text-purple-600 focus:ring-purple-500 mentorship-pref-checkbox">
                    <span>ğŸ‘¨â€ğŸ’¼ Early Professionals (0-3 years)</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Mid-Level Professionals" class="mr-3 h-5 w-5 rounded border-gray-300 text-purple-600 focus:ring-purple-500 mentorship-pref-checkbox">
                    <span>ğŸ’¼ Mid-Level Professionals (4-8 years)</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Senior Professionals" class="mr-3 h-5 w-5 rounded border-gray-300 text-purple-600 focus:ring-purple-500 mentorship-pref-checkbox">
                    <span>ğŸ‘” Senior Professionals (8+ years)</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Career Changers" class="mr-3 h-5 w-5 rounded border-gray-300 text-purple-600 focus:ring-purple-500 mentorship-pref-checkbox">
                    <span>ğŸ”„ Career Changers</span>
                </label>
            </div>

            <!-- Special Groups -->
            <div class="p-2 border-b">
                <p class="font-semibold text-gray-700 mb-1">Special Groups</p>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Women" class="mr-3 h-5 w-5 rounded border-gray-300 text-purple-600 focus:ring-purple-500 mentorship-pref-checkbox">
                    <span>ğŸ‘©â€ğŸ’¼ Women Professionals</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Underrepresented Groups" class="mr-3 h-5 w-5 rounded border-gray-300 text-purple-600 focus:ring-purple-500 mentorship-pref-checkbox">
                    <span>ğŸŒˆ Underrepresented Groups</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Entrepreneurs" class="mr-3 h-5 w-5 rounded border-gray-300 text-purple-600 focus:ring-purple-500 mentorship-pref-checkbox">
                    <span>ğŸ’¡ Entrepreneurs</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="Returning Professionals" class="mr-3 h-5 w-5 rounded border-gray-300 text-purple-600 focus:ring-purple-500 mentorship-pref-checkbox">
                    <span>â†©ï¸ Returning Professionals</span>
                </label>
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="First Generation Students" class="mr-3 h-5 w-5 rounded border-gray-300 text-purple-600 focus:ring-purple-500 mentorship-pref-checkbox">
                    <span>ğŸŒŸ First Generation Students</span>
                </label>
            </div>

            <!-- All Option -->
            <div class="p-2">
                <label class="flex items-center p-2 hover:bg-gray-100 cursor-pointer rounded">
                    <input type="checkbox" value="All" class="mr-3 h-5 w-5 rounded border-gray-300 text-purple-600 focus:ring-purple-500 mentorship-pref-checkbox">
                    <span>ğŸŒ All Groups</span>
                </label>
            </div>
        </div>
    </div>

    <!-- Hidden input to store selected preferences -->
    <input type="hidden" name="mentorship_type_preference" id="mentorship_pref_hidden_input" value="{{ mentorship_type_preference or '' }}">

    <p class="text-sm text-gray-500 mt-1"><i class="fas fa-mouse-pointer mr-1"></i>Click to select multiple preferences</p>
</div>
                </div>
                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Preferred Communication *</label>
                        <select name="preferred_communication" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300">
                            <option value="">Select Preference</option>
                            <option value="Online" {% if preferred_communication == 'Online' %}selected{% endif %}>ğŸ’» Online Only</option>
                            <option value="Offline" {% if preferred_communication == 'Offline' %}selected{% endif %}>ğŸ¢ Offline Only</option>
                            <option value="Hybrid" {% if preferred_communication == 'Hybrid' %}selected{% endif %}>ğŸ”€ Hybrid (Online & Offline)</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Availability *</label>
                        <select name="availability" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300">
                            <option value="">Select Availability</option>
                            <option value="Weekdays" {% if availability == 'Weekdays' %}selected{% endif %}>ğŸ“… Weekdays</option>
                            <option value="Weekends" {% if availability == 'Weekends' %}selected{% endif %}>ğŸ–ï¸ Weekends</option>
                            <option value="Evenings" {% if availability == 'Evenings' %}selected{% endif %}>ğŸŒ™ Evenings</option>
                            <option value="Flexible" {% if availability == 'Flexible' %}selected{% endif %}>ğŸ”„ Flexible</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Connect Frequency *</label>
                        <select name="connect_frequency" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300">
                            <option value="">Select Frequency</option>
                            <option value="Weekly" {% if connect_frequency == 'Weekly' %}selected{% endif %}>ğŸ“… Weekly</option>
                            <option value="Bi-weekly" {% if connect_frequency == 'Bi-weekly' %}selected{% endif %}>ğŸ”„ Bi-weekly</option>
                            <option value="Monthly" {% if connect_frequency == 'Monthly' %}selected{% endif %}>ğŸ—“ï¸ Monthly</option>
                            <option value="As needed" {% if connect_frequency == 'As needed' %}selected{% endif %}>ğŸ’¬ As needed</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">Preferred Duration *</label>
                        <select name="preferred_duration" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300">
                            <option value="">Select Duration</option>
                            <option value="1 month" {% if preferred_duration == '1 month' %}selected{% endif %}>1 month</option>
                            <option value="3 months" {% if preferred_duration == '3 months' %}selected{% endif %}>3 months</option>
                            <option value="6 months" {% if preferred_duration == '6 months' %}selected{% endif %}>6 months</option>
                            <option value="1 year" {% if preferred_duration == '1 year' %}selected{% endif %}>1 year</option>
                            <option value="Flexible" {% if preferred_duration == 'Flexible' %}selected{% endif %}>Flexible</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mentor Philosophy -->
        <div class="bg-white p-8 rounded-2xl shadow-lg border border-blue-100">
            <h3 class="text-3xl font-bold text-gray-800 mb-6 pb-3 border-b-2 border-blue-100">
                <i class="fas fa-lightbulb text-yellow-500 mr-3"></i>Mentor Philosophy
            </h3>
            <div class="space-y-4">
                <div>
                    <label class="block text-gray-700 font-semibold mb-2">Why Mentor? *</label>
                    <textarea name="why_mentor" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" rows="3" placeholder="Share your motivation for becoming a mentor...">{{ why_mentor }}</textarea>
                </div>
                <div>
                    <label class="block text-gray-700 font-semibold mb-2">Mentorship Philosophy *</label>
                    <textarea name="mentorship_philosophy" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" rows="3" placeholder="Describe your approach to mentorship...">{{ mentorship_philosophy }}</textarea>
                </div>
                <div>
                    <label class="block text-gray-700 font-semibold mb-2">Mentorship Motto *</label>
                    <input type="text" name="mentorship_motto" value="{{ mentorship_motto }}" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" placeholder="e.g., 'Empower through guidance and support'">
                </div>
            </div>
        </div>

        <!-- Additional Information -->
        <div class="bg-white p-8 rounded-2xl shadow-lg border border-blue-100">
            <h3 class="text-3xl font-bold text-gray-800 mb-6 pb-3 border-b-2 border-blue-100">
                <i class="fas fa-info-circle text-blue-500 mr-3"></i>Additional Information
            </h3>
            <textarea name="additional_info" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition duration-300" rows="4" placeholder="Any other information you'd like to share with potential mentees...">{{ additional_info }}</textarea>
        </div>

        <!-- Submit Button -->
        <div class="text-center pt-6">
            <button type="submit" class="px-12 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-2xl shadow-2xl hover:from-blue-700 hover:to-purple-700 transform hover:scale-105 transition duration-300 font-bold text-lg">
                <i class="fas fa-save mr-2"></i>Save Profile Changes
            </button>
        </div>
    </form>
</div>


<script>
// Datalist for country codes
const countryCodesDatalist = `
<datalist id="country_codes">
    <option value="+91">India</option>
    <option value="+1">USA/Canada</option>
    <option value="+44">UK</option>
    <option value="+971">UAE</option>
    <option value="+966">Saudi Arabia</option>
    <option value="+65">Singapore</option>
    <option value="+61">Australia</option>
    <option value="+49">Germany</option>
    <option value="+33">France</option>
    <option value="+81">Japan</option>
    <option value="+86">China</option>
    <option value="+92">Pakistan</option>
    <option value="+880">Bangladesh</option>
    <option value="+977">Nepal</option>
    <option value="+94">Sri Lanka</option>
    <option value="+60">Malaysia</option>
    <option value="+63">Philippines</option>
    <option value="+82">South Korea</option>
    <option value="+39">Italy</option>
    <option value="+34">Spain</option>
    <option value="+7">Russia</option>
    <option value="+55">Brazil</option>
    <option value="+52">Mexico</option>
    <option value="+27">South Africa</option>
    <option value="+20">Egypt</option>
    <option value="+234">Nigeria</option>
    <option value="+254">Kenya</option>
    <option value="+974">Qatar</option>
    <option value="+965">Kuwait</option>
    <option value="+968">Oman</option>
    <option value="+973">Bahrain</option>
    <option value="+64">New Zealand</option>
    <option value="+31">Netherlands</option>
    <option value="+41">Switzerland</option>
    <option value="+46">Sweden</option>
    <option value="+47">Norway</option>
    <option value="+45">Denmark</option>
    <option value="+48">Poland</option>
    <option value="+353">Ireland</option>
    <option value="+352">Luxembourg</option>
    <option value="+32">Belgium</option>
    <option value="+43">Austria</option>
    <option value="+358">Finland</option>
    <option value="+351">Portugal</option>
    <option value="+30">Greece</option>
    <option value="+420">Czech Republic</option>
    <option value="+36">Hungary</option>
    <option value="+380">Ukraine</option>
    <option value="+90">Turkey</option>
    <option value="+972">Israel</option>
</datalist>`;
document.body.insertAdjacentHTML('beforeend', countryCodesDatalist);

    function previewImage(input) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = input.closest('.text-center').querySelector('img');
                if (img) {
                    img.src = e.target.result;
                } else {
                    const div = input.closest('.text-center').querySelector('div');
                    div.innerHTML = `<img src="${e.target.result}" class="w-32 h-32 md:w-40 md:h-40 object-cover rounded-full shadow-lg border-4 border-blue-200">`;
                }
            }
            reader.readAsDataURL(input.files[0]);
        }
    }


document.addEventListener('DOMContentLoaded', function() {
    // Institution dropdown handler
    const institutionSelect = document.getElementById('institution');
    const otherInstitutionField = document.getElementById('other_institution_field');
    
    if (institutionSelect) {
        institutionSelect.addEventListener('change', function() {
            if (this.value === 'Other') {
                otherInstitutionField.style.display = 'block';
                document.getElementById('other_institution_name').required = true;
            } else {
                otherInstitutionField.style.display = 'none';
                document.getElementById('other_institution_name').required = false;
            }
        });
    }

    // Profession dropdown handler
    const professionSelect = document.getElementById('profession_select');
    const otherProfessionField = document.getElementById('other_profession_field');
    
    if (professionSelect) {
        professionSelect.addEventListener('change', function() {
            if (this.value === 'Other') {
                otherProfessionField.style.display = 'block';
                document.getElementById('other_profession').required = true;
            } else {
                otherProfessionField.style.display = 'none';
                document.getElementById('other_profession').required = false;
            }
        });
    }

    // Industry/Sector dropdown handler
    const industrySectorSelect = document.getElementById('industry_sector_select');
    const otherIndustrySectorField = document.getElementById('other_industry_sector_field');
    
    if (industrySectorSelect) {
        industrySectorSelect.addEventListener('change', function() {
            if (this.value === 'Other') {
                otherIndustrySectorField.style.display = 'block';
                document.getElementById('other_industry_sector').required = true;
            } else {
                otherIndustrySectorField.style.display = 'none';
                document.getElementById('other_industry_sector').required = false;
            }
        });
    }

    // Country dropdown handler
    const countrySelect = document.getElementById('country_select');
    const otherCountryField = document.getElementById('other_country_field');
    
    if (countrySelect) {
        countrySelect.addEventListener('change', function() {
            if (this.value === 'Other') {
                otherCountryField.style.display = 'block';
                document.getElementById('other_country').required = true;
            } else {
                otherCountryField.style.display = 'none';
                document.getElementById('other_country').required = false;
            }
        });
    }

    // Education dropdown handler
    const educationSelect = document.getElementById('education_select');
    const otherEducationField = document.getElementById('other_education_field');
    
    if (educationSelect) {
        educationSelect.addEventListener('change', function() {
            if (this.value === 'Other') {
                otherEducationField.style.display = 'block';
                document.getElementById('other_education').required = true;
            } else {
                otherEducationField.style.display = 'none';
                document.getElementById('other_education').required = false;
            }
        });
    }

    // Language dropdown handler (for multi-select)
    const languageSelect = document.getElementById('language_select');
    const otherLanguageField = document.getElementById('other_language_field');
    
    if (languageSelect) {
        languageSelect.addEventListener('change', function() {
            const selectedOptions = Array.from(this.selectedOptions).map(opt => opt.value);
            if (selectedOptions.includes('Other')) {
                otherLanguageField.style.display = 'block';
            } else {
                otherLanguageField.style.display = 'none';
            }
        });
    }
});

// Form validation function
function validateForm() {
    const form = document.getElementById('mentorProfileForm');
    if (!form) {
        console.error('Form not found');
        return false;
    }
    
    const requiredFields = [
        { name: 'profession', label: 'Profession' },
        { name: 'skills', label: 'Skills' },
        { name: 'role', label: 'Role' },
        { name: 'industry_sector', label: 'Industry Sector' },
        { name: 'organisation', label: 'Organisation' },
        { name: 'years_of_experience', label: 'Years of Experience' },
        { name: 'whatsapp', label: 'WhatsApp Number' },
        { name: 'city', label: 'City' },
        { name: 'country', label: 'Country' },
        { name: 'education', label: 'Education' },
        { name: 'language', label: 'Language' },
        { name: 'linkedin_link', label: 'LinkedIn Link' },
        { name: 'mentorship_topics', label: 'Mentorship Topics' },
        { name: 'mentorship_type_preference', label: 'Mentorship Type Preference' },
        { name: 'preferred_communication', label: 'Preferred Communication' },
        { name: 'availability', label: 'Availability' },
        { name: 'connect_frequency', label: 'Connect Frequency' },
        { name: 'preferred_duration', label: 'Preferred Duration' },
        { name: 'why_mentor', label: 'Why Mentor' },
        { name: 'mentorship_philosophy', label: 'Mentorship Philosophy' },
        { name: 'mentorship_motto', label: 'Mentorship Motto' }
    ];

    let emptyFields = [];

    requiredFields.forEach(field => {
        const element = form.elements[field.name];
        if (!element) {
            console.warn(`Field not found: ${field.name}`);
            return;
        }

        let isEmpty = false;

        if (element.type === 'select-multiple') {
            // For multi-select, check if at least one option is selected
            isEmpty = element.selectedOptions.length === 0;
        } else if (element.tagName === 'TEXTAREA') {
            isEmpty = !element.value.trim();
        } else if (element.type === 'text' || element.type === 'email' || element.type === 'number' || element.type === 'url') {
            isEmpty = !element.value.trim();
        } else if (element.type === 'select-one') {
            isEmpty = !element.value || element.value === '';
        }

        if (isEmpty) {
            emptyFields.push(field.label);
            element.style.borderColor = '#ef4444';
            element.style.borderWidth = '2px';
        } else {
            element.style.borderColor = '';
            element.style.borderWidth = '';
        }
    });

    if (emptyFields.length > 0) {
        alert('âŒ Please fill all mandatory fields:\n\n' + emptyFields.join('\n'));
        return false;
    }

    return true;
}

// Clear error styling when user starts typing
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('mentorProfileForm');
    if (form) {
        const inputs = form.querySelectorAll('input, select, textarea');
        inputs.forEach(input => {
            input.addEventListener('change', function() {
                this.style.borderColor = '';
                this.style.borderWidth = '';
            });
            input.addEventListener('input', function() {
                this.style.borderColor = '';
                this.style.borderWidth = '';
            });
        });
    } else {
        console.error('mentorProfileForm not found in DOM');
    }
    
    // Handle Luxembourg criminal certificate requirement
    updateCriminalCertificateRequirement();
});

// PDF preview function
function previewPDF(input) {
    const file = input.files[0];
    if (file) {
        // Check if file is PDF
        if (!file.name.toLowerCase().endsWith('.pdf')) {
            alert('Please upload a PDF file only');
            input.value = '';
            return;
        }
        
        // Check file size (max 10MB)
        const maxSize = 10 * 1024 * 1024; // 10MB in bytes
        if (file.size > maxSize) {
            alert('File size must be less than 10MB');
            input.value = '';
            return;
        }
        
        // Show preview
        document.getElementById('pdf_preview').classList.remove('hidden');
        document.getElementById('pdf_filename').textContent = file.name;
        document.getElementById('pdf_filesize').textContent = formatFileSize(file.size);
    }
}

// Clear PDF selection
function clearPDF() {
    document.getElementById('criminal_certificate_input').value = '';
    document.getElementById('pdf_preview').classList.add('hidden');
}

// Format file size
function formatFileSize(bytes) {
    if (bytes === 0) return '0 Bytes';
    const k = 1024;
    const sizes = ['Bytes', 'KB', 'MB'];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];
}

// Update criminal certificate requirement based on country selection
function updateCriminalCertificateRequirement() {
    const countrySelect = document.getElementById('country_select');
    const otherCountryInput = document.getElementById('other_country');
    const luxembourgBadge = document.getElementById('luxembourg_required_badge');
    const luxembourgMessage = document.getElementById('luxembourg_message');
    const optionalMessage = document.getElementById('optional_message');
    const certificateField = document.getElementById('criminal_certificate_field');
    
    function checkLuxembourg() {
        const selectedCountry = countrySelect.value;
        const otherCountry = otherCountryInput ? otherCountryInput.value : '';
        
        const isLuxembourg = selectedCountry === 'Luxembourg' || 
                            (selectedCountry === 'Other' && otherCountry.toLowerCase() === 'luxembourg');
        
        if (isLuxembourg) {
            // Show required indicator
            luxembourgBadge.style.display = 'inline';
            luxembourgMessage.style.display = 'inline';
            optionalMessage.style.display = 'none';
            certificateField.classList.add('border-2', 'border-red-200', 'p-4', 'rounded-xl', 'bg-red-50');
        } else {
            // Show optional indicator
            luxembourgBadge.style.display = 'none';
            luxembourgMessage.style.display = 'none';
            optionalMessage.style.display = 'inline';
            certificateField.classList.remove('border-2', 'border-red-200', 'p-4', 'rounded-xl', 'bg-red-50');
        }
    }
    
    // Check on page load
    checkLuxembourg();
    
    // Check when country changes
    if (countrySelect) {
        countrySelect.addEventListener('change', checkLuxembourg);
    }
    
    // Check when other country input changes
    if (otherCountryInput) {
        otherCountryInput.addEventListener('input', checkLuxembourg);
    }
}

// Language multi-select dropdown functionality
document.addEventListener('DOMContentLoaded', function() {
    const languageDropdownToggle = document.getElementById('language_dropdown_toggle');
    const languageDropdownMenu = document.getElementById('language_dropdown_menu');
    const selectedLanguagesContainer = document.getElementById('selected_languages_container');
    const languageHiddenInput = document.getElementById('language_hidden_input');
    const languageCheckboxes = document.querySelectorAll('.language-checkbox');
    const otherLanguageField = document.getElementById('other_language_field');
    const otherLanguageInput = document.getElementById('other_language_input');

    // Store selected languages
    let selectedLanguages = [];

    // Initialize with existing languages from hidden input
    if (languageHiddenInput.value) {
        const existingLanguages = languageHiddenInput.value.split(',');
        selectedLanguages = existingLanguages.filter(lang => lang.trim() !== '');
        
        // Check corresponding checkboxes
        languageCheckboxes.forEach(checkbox => {
            if (selectedLanguages.includes(checkbox.value)) {
                checkbox.checked = true;
            }
        });
        
        // Show other language field if "Other" is selected
        if (selectedLanguages.includes('Other')) {
            otherLanguageField.style.display = 'block';
        }
        
        updateSelectedLanguagesDisplay();
    }

    // Toggle dropdown
    if (languageDropdownToggle) {
        languageDropdownToggle.addEventListener('click', function(e) {
            e.stopPropagation();
            languageDropdownMenu.classList.toggle('hidden');
        });
    }

    // Close dropdown when clicking outside
    document.addEventListener('click', function(e) {
        if (!languageDropdownToggle.contains(e.target) && !languageDropdownMenu.contains(e.target)) {
            languageDropdownMenu.classList.add('hidden');
        }
    });

    // Handle checkbox changes
    languageCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', function() {
            const value = this.value;
            const isChecked = this.checked;

            if (value === 'Other') {
                if (isChecked) {
                    otherLanguageField.style.display = 'block';
                    otherLanguageInput.focus();
                } else {
                    otherLanguageField.style.display = 'none';
                    otherLanguageInput.value = '';
                }
            }

            if (isChecked) {
                if (!selectedLanguages.includes(value)) {
                    selectedLanguages.push(value);
                }
            } else {
                const index = selectedLanguages.indexOf(value);
                if (index > -1) {
                    selectedLanguages.splice(index, 1);
                }
            }

            updateSelectedLanguagesDisplay();
            updateHiddenInput();
        });
    });

    // Handle other language input
    if (otherLanguageInput) {
        otherLanguageInput.addEventListener('input', function() {
            updateHiddenInput();
        });
    }

    // Update selected languages display
    function updateSelectedLanguagesDisplay() {
        selectedLanguagesContainer.innerHTML = '';
        
        selectedLanguages.forEach(language => {
            const tag = document.createElement('div');
            tag.className = 'inline-flex items-center bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full';
            tag.innerHTML = `
                <span>${language}</span>
                <button type="button" class="ml-2 text-blue-600 hover:text-blue-800 remove-language-btn" data-value="${language}">
                    &times;
                </button>
            `;
            selectedLanguagesContainer.appendChild(tag);
        });

        // Add remove functionality
        document.querySelectorAll('.remove-language-btn').forEach(button => {
            button.addEventListener('click', function() {
                const valueToRemove = this.getAttribute('data-value');
                removeLanguage(valueToRemove);
            });
        });
    }

    // Remove language
    function removeLanguage(value) {
        selectedLanguages = selectedLanguages.filter(lang => lang !== value);
        
        // Uncheck corresponding checkbox
        languageCheckboxes.forEach(checkbox => {
            if (checkbox.value === value) {
                checkbox.checked = false;
            }
        });

        // Hide other language field if "Other" is removed
        if (value === 'Other') {
            otherLanguageField.style.display = 'none';
            otherLanguageInput.value = '';
        }

        updateSelectedLanguagesDisplay();
        updateHiddenInput();
    }

    // Update hidden input value
    function updateHiddenInput() {
        let languages = [...selectedLanguages];
        
        // Add other languages if specified
        if (selectedLanguages.includes('Other') && otherLanguageInput.value.trim()) {
            const otherLanguages = otherLanguageInput.value.split(',').map(lang => lang.trim()).filter(lang => lang);
            languages = [...selectedLanguages.filter(lang => lang !== 'Other'), ...otherLanguages];
        }
        
        languageHiddenInput.value = languages.join(',');
    }

    // Form validation for languages
    function validateLanguages() {
        if (selectedLanguages.length === 0) {
            selectedLanguagesContainer.style.borderColor = '#ef4444';
            selectedLanguagesContainer.style.borderWidth = '2px';
            return false;
        } else {
            selectedLanguagesContainer.style.borderColor = '';
            selectedLanguagesContainer.style.borderWidth = '';
            return true;
        }
    }

    // Update form validation to include languages
    const originalValidateForm = window.validateForm;
    window.validateForm = function() {
        if (!validateLanguages()) {
            alert('âŒ Please select at least one language');
            return false;
        }
        return originalValidateForm();
    };
});




// Mentorship Type Preference multi-select dropdown functionality
document.addEventListener('DOMContentLoaded', function() {
    const mentorshipPrefDropdownToggle = document.getElementById('mentorship_pref_dropdown_toggle');
    const mentorshipPrefDropdownMenu = document.getElementById('mentorship_pref_dropdown_menu');
    const selectedMentorshipPrefsContainer = document.getElementById('selected_mentorship_prefs_container');
    const mentorshipPrefHiddenInput = document.getElementById('mentorship_pref_hidden_input');
    const mentorshipPrefCheckboxes = document.querySelectorAll('.mentorship-pref-checkbox');

    // Store selected preferences
    let selectedMentorshipPrefs = [];

    // Initialize with existing preferences from hidden input
    if (mentorshipPrefHiddenInput.value) {
        const existingPrefs = mentorshipPrefHiddenInput.value.split(',');
        selectedMentorshipPrefs = existingPrefs.filter(pref => pref.trim() !== '');
        
        // Check corresponding checkboxes
        mentorshipPrefCheckboxes.forEach(checkbox => {
            if (selectedMentorshipPrefs.includes(checkbox.value)) {
                checkbox.checked = true;
            }
        });
        
        updateSelectedMentorshipPrefsDisplay();
    }

    // Toggle dropdown
    if (mentorshipPrefDropdownToggle) {
        mentorshipPrefDropdownToggle.addEventListener('click', function(e) {
            e.stopPropagation();
            mentorshipPrefDropdownMenu.classList.toggle('hidden');
        });
    }

    // Close dropdown when clicking outside
    document.addEventListener('click', function(e) {
        if (!mentorshipPrefDropdownToggle.contains(e.target) && !mentorshipPrefDropdownMenu.contains(e.target)) {
            mentorshipPrefDropdownMenu.classList.add('hidden');
        }
    });

    // Handle checkbox changes
    mentorshipPrefCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', function() {
            const value = this.value;
            const isChecked = this.checked;

            // Handle "All" option
            if (value === 'All' && isChecked) {
                // Uncheck all other options
                mentorshipPrefCheckboxes.forEach(cb => {
                    if (cb.value !== 'All') {
                        cb.checked = false;
                    }
                });
                selectedMentorshipPrefs = ['All'];
            } else if (value !== 'All' && isChecked) {
                // If any specific option is selected, uncheck "All"
                const allCheckbox = document.querySelector('.mentorship-pref-checkbox[value="All"]');
                if (allCheckbox) {
                    allCheckbox.checked = false;
                }
                const allIndex = selectedMentorshipPrefs.indexOf('All');
                if (allIndex > -1) {
                    selectedMentorshipPrefs.splice(allIndex, 1);
                }
                
                if (!selectedMentorshipPrefs.includes(value)) {
                    selectedMentorshipPrefs.push(value);
                }
            } else if (!isChecked) {
                // Remove from selected list
                const index = selectedMentorshipPrefs.indexOf(value);
                if (index > -1) {
                    selectedMentorshipPrefs.splice(index, 1);
                }
            }

            updateSelectedMentorshipPrefsDisplay();
            updateMentorshipPrefHiddenInput();
        });
    });

    // Update selected preferences display
    function updateSelectedMentorshipPrefsDisplay() {
        selectedMentorshipPrefsContainer.innerHTML = '';
        
        selectedMentorshipPrefs.forEach(pref => {
            const tag = document.createElement('div');
            tag.className = 'inline-flex items-center bg-purple-100 text-purple-800 text-sm font-medium px-3 py-1 rounded-full';
            tag.innerHTML = `
                <span>${pref}</span>
                <button type="button" class="ml-2 text-purple-600 hover:text-purple-800 remove-mentorship-pref-btn" data-value="${pref}">
                    &times;
                </button>
            `;
            selectedMentorshipPrefsContainer.appendChild(tag);
        });

        // Add remove functionality
        document.querySelectorAll('.remove-mentorship-pref-btn').forEach(button => {
            button.addEventListener('click', function() {
                const valueToRemove = this.getAttribute('data-value');
                removeMentorshipPref(valueToRemove);
            });
        });
    }

    // Remove preference
    function removeMentorshipPref(value) {
        selectedMentorshipPrefs = selectedMentorshipPrefs.filter(pref => pref !== value);
        
        // Uncheck corresponding checkbox
        mentorshipPrefCheckboxes.forEach(checkbox => {
            if (checkbox.value === value) {
                checkbox.checked = false;
            }
        });

        updateSelectedMentorshipPrefsDisplay();
        updateMentorshipPrefHiddenInput();
    }

    // Update hidden input value
    function updateMentorshipPrefHiddenInput() {
        mentorshipPrefHiddenInput.value = selectedMentorshipPrefs.join(',');
    }

    // Form validation for mentorship preferences
    function validateMentorshipPrefs() {
        if (selectedMentorshipPrefs.length === 0) {
            selectedMentorshipPrefsContainer.style.borderColor = '#ef4444';
            selectedMentorshipPrefsContainer.style.borderWidth = '2px';
            return false;
        } else {
            selectedMentorshipPrefsContainer.style.borderColor = '';
            selectedMentorshipPrefsContainer.style.borderWidth = '';
            return true;
        }
    }

    // Update form validation to include mentorship preferences
    const originalValidateForm = window.validateForm;
    window.validateForm = function() {
        if (!validateLanguages()) {
            alert('âŒ Please select at least one language');
            return false;
        }
        if (!validateMentorshipPrefs()) {
            alert('âŒ Please select at least one mentorship type preference');
            return false;
        }
        return originalValidateForm();
    };
});




// Mentorship Topics multi-select dropdown functionality
document.addEventListener('DOMContentLoaded', function() {
    const topicsDropdownToggle = document.getElementById('topics_dropdown_toggle');
    const topicsDropdownMenu = document.getElementById('topics_dropdown_menu');
    const selectedTopicsContainer = document.getElementById('selected_topics_container');
    const topicsHiddenInput = document.getElementById('topics_hidden_input');
    const topicCheckboxes = document.querySelectorAll('.topic-checkbox');

    // Store selected topics
    let selectedTopics = [];

    // Initialize with existing topics from hidden input
    if (topicsHiddenInput.value) {
        const existingTopics = topicsHiddenInput.value.split(',');
        selectedTopics = existingTopics.filter(topic => topic.trim() !== '');
        
        // Check corresponding checkboxes
        topicCheckboxes.forEach(checkbox => {
            if (selectedTopics.includes(checkbox.value)) {
                checkbox.checked = true;
            }
        });
        
        updateSelectedTopicsDisplay();
    }

    // Toggle dropdown
    if (topicsDropdownToggle) {
        topicsDropdownToggle.addEventListener('click', function(e) {
            e.stopPropagation();
            topicsDropdownMenu.classList.toggle('hidden');
        });
    }

    // Close dropdown when clicking outside
    document.addEventListener('click', function(e) {
        if (!topicsDropdownToggle.contains(e.target) && !topicsDropdownMenu.contains(e.target)) {
            topicsDropdownMenu.classList.add('hidden');
        }
    });

    // Handle checkbox changes
    topicCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', function() {
            const value = this.value;
            const isChecked = this.checked;

            if (isChecked) {
                if (!selectedTopics.includes(value)) {
                    selectedTopics.push(value);
                }
            } else {
                const index = selectedTopics.indexOf(value);
                if (index > -1) {
                    selectedTopics.splice(index, 1);
                }
            }

            updateSelectedTopicsDisplay();
            updateTopicsHiddenInput();
        });
    });

    // Update selected topics display
    function updateSelectedTopicsDisplay() {
        selectedTopicsContainer.innerHTML = '';
        
        selectedTopics.forEach(topic => {
            const tag = document.createElement('div');
            tag.className = 'inline-flex items-center bg-green-100 text-green-800 text-sm font-medium px-3 py-1 rounded-full';
            tag.innerHTML = `
                <span>${topic}</span>
                <button type="button" class="ml-2 text-green-600 hover:text-green-800 remove-topic-btn" data-value="${topic}">
                    &times;
                </button>
            `;
            selectedTopicsContainer.appendChild(tag);
        });

        // Add remove functionality
        document.querySelectorAll('.remove-topic-btn').forEach(button => {
            button.addEventListener('click', function() {
                const valueToRemove = this.getAttribute('data-value');
                removeTopic(valueToRemove);
            });
        });
    }

    // Remove topic
    function removeTopic(value) {
        selectedTopics = selectedTopics.filter(topic => topic !== value);
        
        // Uncheck corresponding checkbox
        topicCheckboxes.forEach(checkbox => {
            if (checkbox.value === value) {
                checkbox.checked = false;
            }
        });

        updateSelectedTopicsDisplay();
        updateTopicsHiddenInput();
    }

    // Update hidden input value
    function updateTopicsHiddenInput() {
        topicsHiddenInput.value = selectedTopics.join(',');
    }

    // Form validation for mentorship topics
    function validateMentorshipTopics() {
        if (selectedTopics.length === 0) {
            selectedTopicsContainer.style.borderColor = '#ef4444';
            selectedTopicsContainer.style.borderWidth = '2px';
            return false;
        } else {
            selectedTopicsContainer.style.borderColor = '';
            selectedTopicsContainer.style.borderWidth = '';
            return true;
        }
    }

    // Update form validation to include mentorship topics
    const originalValidateForm = window.validateForm;
    window.validateForm = function() {
        if (!validateLanguages()) {
            alert('âŒ Please select at least one language');
            return false;
        }
        if (!validateMentorshipPrefs()) {
            alert('âŒ Please select at least one mentorship type preference');
            return false;
        }
        if (!validateMentorshipTopics()) {
            alert('âŒ Please select at least one mentorship topic');
            return false;
        }
        return originalValidateForm();
    };
});

</script>
{% endblock %}